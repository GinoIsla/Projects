MP2COD 3.60, COFF to COD File Converter
Copyright (c) 2003 Microchip Technology Inc.
Listing File Generated: Mon Jun 21 13:07:45 2004


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           ;************************************************************                    C:\Embedded\Rover\Rover_master.ASM
                                           ;	TITLE:	Rover Master - Transmitter side                                         C:\Embedded\Rover\Rover_master.ASM
                                           ;	It continually reads the analogue inputs,the input switches and sends them to the slave. C:\Embedded\Rover\Rover_master.ASM
                                           ;	Programmer: GINO ISLA                                                          C:\Embedded\Rover\Rover_master.ASM
                                           ;	Created:	June-02-2004                                                          C:\Embedded\Rover\Rover_master.ASM
                                           ;	REVISION HISTORY:                                                              C:\Embedded\Rover\Rover_master.ASM
                                           ;	HARDWARE: BIT SRL. Low Power transciever                                       C:\Embedded\Rover\Rover_master.ASM
                                           ;	FREQUENCY: 7.372MHz                                                            C:\Embedded\Rover\Rover_master.ASM
                                           ;	Function: Remote control of a moving vehicle                                   C:\Embedded\Rover\Rover_master.ASM
                                           ;************************************************************                    C:\Embedded\Rover\Rover_master.ASM
                                           			list	p=16f876                                                                 C:\Embedded\Rover\Rover_master.ASM
                                                                                                                            C:\Embedded\Rover\Rover_master.ASM
                                           ;                                                                                C:\Embedded\Rover\Rover_master.ASM
                                           ;REMEMBER TO CHANGE THE TX_MASTER/RX_SLAVE DEFINITION IN Rover.h                 C:\Embedded\Rover\Rover_master.ASM
                                           ;BEFORE ASSEMBLY OF THE CC1000 LIBRARY!!!                                        C:\Embedded\Rover\Rover_master.ASM
                                           ;                                                                                C:\Embedded\Rover\Rover_master.ASM
                                                                                                                            C:\Embedded\Rover\Rover_master.ASM
                                           ;#define		DEBUG_MODE                                                             C:\Embedded\Rover\Rover_master.ASM
                                                                                                                            C:\Embedded\Rover\Rover_master.ASM
                                           #include	<p16f876.inc>                                                           C:\Embedded\Rover\Rover_master.ASM
                                                   LIST                                                                     C:\Program Files\MPLAB IDE\MCHIP_Tools\p16f876.inc
                                           ; P16F876.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.  C:\Program Files\MPLAB IDE\MCHIP_Tools\p16f876.inc
                                                   LIST                                                                     C:\Program Files\MPLAB IDE\MCHIP_Tools\p16f876.inc
                                           #include 	<CC1000.h>                                                             C:\Embedded\Rover\Rover_master.ASM
                                           ;/* Constants defined for CC1000 */                                              C:\Embedded\Rover\CC1000.h
                                                                                                                            C:\Embedded\Rover\CC1000.h
                                           ;/* Register addresses */                                                        C:\Embedded\Rover\CC1000.h
                                                                                                                            C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MAIN            0x00                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_2A         0x01                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_1A         0x02                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_0A         0x03                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_2B         0x04                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_1B         0x05                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_0B         0x06                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSEP1           0x07                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSEP0           0x08                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_CURRENT         0x09                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FRONT_END       0x0A                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_PA_POW          0x0B                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_PLL             0x0C                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_LOCK            0x0D                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_CAL             0x0E                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MODEM2          0x0F                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MODEM1          0x10                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MODEM0          0x11                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MATCH           0x12                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSCTRL          0x13                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE7         0x14                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE6         0x15                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE5         0x16                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE4         0x17                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE3         0x18                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE2         0x19                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE1         0x1A                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSDELAY         0x1B                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_PRESCALER       0x1C                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST6           0x40                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST5           0x41                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST4           0x42                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST3           0x43                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST2           0x44                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST1           0x45                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST0           0x46                                              C:\Embedded\Rover\CC1000.h
                                                                                                                            C:\Embedded\Rover\CC1000.h
                                           #include 	<rover.h>                                                              C:\Embedded\Rover\Rover_master.ASM
                                           ;Pin usage definitions for the rover Master/Tranmitter                           C:\Embedded\Rover\rover.h
                                           ;CC1000 and PIC16f76                                                             C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;===========================================================                     C:\Embedded\Rover\rover.h
                                           ;CHANGE THESE DEFINITIONS WHEN COMPILING THE ASM CODE OR THE                     C:\Embedded\Rover\rover.h
                                           ;LIBRARY FOR MASTER OR FOR SLAVE                                                 C:\Embedded\Rover\rover.h
                                           #define		TX_MASTER                                                               C:\Embedded\Rover\rover.h
                                           ;#define		RX_SLAVE                                                               C:\Embedded\Rover\rover.h
                                           ;===========================================================                     C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           	ifdef	TX_MASTER                                                                 C:\Embedded\Rover\rover.h
                                           #define PCLK			PORTC,1	;                                                         C:\Embedded\Rover\rover.h
                                           #define PALE			PORTC,2	;                                                         C:\Embedded\Rover\rover.h
                                           	else                                                                            C:\Embedded\Rover\rover.h
                                           #define PCLK			PORTA,2	;                                                         C:\Embedded\Rover\rover.h
                                           #define PALE			PORTA,1	;                                                         C:\Embedded\Rover\rover.h
                                           	endif                                                                           C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           #define PDATA			PORTC,0	; Register interfaces                                    C:\Embedded\Rover\rover.h
                                           #define DIO 			PORTC,3	; Data interfaces                                         C:\Embedded\Rover\rover.h
                                           #define DCLK			PORTB,0 ;                                                         C:\Embedded\Rover\rover.h
                                           #define CHP_OUT			PORTC,5 ;not used                                              C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           #define PDATA_DIR		TRISC,0                                                       C:\Embedded\Rover\rover.h
                                           #define DIO_DIR			TRISC,3                                                        C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           #define SW1				PORTB,1	;Switches on Trasnmitter side                             C:\Embedded\Rover\rover.h
                                           #define SW2				PORTB,2	;                                                         C:\Embedded\Rover\rover.h
                                           #define SW3				PORTB,3	;                                                         C:\Embedded\Rover\rover.h
                                           #define	STEERING		PORTC,1	;                                                      C:\Embedded\Rover\rover.h
                                           #define	SPIN_DIR		PORTC,7	;                                                      C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           #define LED1			PORTC,4	;(IN5)LEDs on Receiver side corresponding to the          C:\Embedded\Rover\rover.h
                                           #define LED2			PORTB,2	;(IN6) swithces above                                     C:\Embedded\Rover\rover.h
                                           #define LED3			PORTB,1	;(IN7)                                                    C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;ERRORS AND OTHER EVENTS                                                         C:\Embedded\Rover\rover.h
                                           #define BUTTON_PRESSED	G_Events,0                                                C:\Embedded\Rover\rover.h
                                           #define REPLY_SENT		G_Events,1                                                   C:\Embedded\Rover\rover.h
                                           #define	NEW_COUNT		G_Events,2                                                    C:\Embedded\Rover\rover.h
                                           #define TIME_0_OUT		G_Events,3                                                   C:\Embedded\Rover\rover.h
                                           #define BYTE_FULL		G_Events,4                                                    C:\Embedded\Rover\rover.h
                                           #define RESET_CNTRS		G_Events,5                                                  C:\Embedded\Rover\rover.h
                                           #define CALIBRATION_OK	G_Events,6                                                C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;STATES                                                                          C:\Embedded\Rover\rover.h
                                           #define IDLE_MODE		G_State,0                                                     C:\Embedded\Rover\rover.h
                                           #define MASTER			G_State,1                                                       C:\Embedded\Rover\rover.h
                                           #define SLAVE			G_State,2                                                        C:\Embedded\Rover\rover.h
                                           #define RXCVER			G_State,3                                                       C:\Embedded\Rover\rover.h
                                           #define TXMTER			G_State,4                                                       C:\Embedded\Rover\rover.h
                                           #define	QUIET			G_State,5                                                        C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;PROTOCOL                                                                        C:\Embedded\Rover\rover.h
                                           ;PROTOCOL PARTS                                                                  C:\Embedded\Rover\rover.h
                                           #define BOF_FOUND		G_Pr_status,0                                                 C:\Embedded\Rover\rover.h
                                           #define PREAM_FINISHED	G_Pr_status,1                                             C:\Embedded\Rover\rover.h
                                           #define UI_FINISHED		G_Pr_status,2                                               C:\Embedded\Rover\rover.h
                                           #define	ADDR_CMPLT		G_Pr_status,3                                                C:\Embedded\Rover\rover.h
                                           #define NBR_BYTES_RCVD	G_Pr_status,4                                             C:\Embedded\Rover\rover.h
                                           #define DATA_RECEIVED	G_Pr_status,5                                              C:\Embedded\Rover\rover.h
                                           #define SUMCHECK_DONE	G_Pr_status,6                                              C:\Embedded\Rover\rover.h
                                           #define CMMND_COMPLETE	G_Pr_status,7                                             C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;OFFSETS:                                                                        C:\Embedded\Rover\rover.h
                                           #define PREAMBLE		0x00                                                           C:\Embedded\Rover\rover.h
                                           #define UI				0x03                                                               C:\Embedded\Rover\rover.h
                                           #define ADDRESS			0x05                                                           C:\Embedded\Rover\rover.h
                                           #define NO_BYTES		0x07                                                           C:\Embedded\Rover\rover.h
                                           #define DATA_OFFS		0x08                                                          C:\Embedded\Rover\rover.h
                                           #define SUM_CHECK		0x0F                                                          C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           #define	UI_CODE1		0xCD	;unique ramdom number                                     C:\Embedded\Rover\rover.h
                                           #define	UI_CODE2		0x4D	;                                                         C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;NUMBER OF BYTES                                                                 C:\Embedded\Rover\rover.h
                                           #define PREA_SIZE		3                                                             C:\Embedded\Rover\rover.h
                                           #define UI_SIZE			2                                                              C:\Embedded\Rover\rover.h
                                           #define ADD_SIZE		2                                                              C:\Embedded\Rover\rover.h
                                           #define NBR_SIZE		1                                                              C:\Embedded\Rover\rover.h
                                           #define DATA_SIZE		7                                                             C:\Embedded\Rover\rover.h
                                           #define CS_SIZE			1                                                              C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           TOT_FRAME_SIZ			equ	PREA_SIZE+UI_SIZE+ADD_SIZE+NBR_SIZE+DATA_SIZE+CS_SIZE        C:\Embedded\Rover\rover.h
                                           FIXED_PART				equ	PREA_SIZE+UI_SIZE+ADD_SIZE+NBR_SIZE                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           #define	RX_CURRENT		0x44 ;0100xxxx=950uA, XXXX=?????                             C:\Embedded\Rover\rover.h
                                           #define RXPLL			0x60                                                             C:\Embedded\Rover\rover.h
                                           #define	TX_CURRENT		0x81 ;1000xxxx=1450uA                                        C:\Embedded\Rover\rover.h
                                           #define TXPLL			0x48                                                             C:\Embedded\Rover\rover.h
                                           #define PA_VALUE		0xFF                                                           C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           ;TIMER 1 TIMERS                                                                  C:\Embedded\Rover\rover.h
                                           ;;;#define	RXMIT_TIM1L		0x90	;at 9600bps: h'3590 = 13,712uS=14ms                 C:\Embedded\Rover\rover.h
                                           ;;;#define	RXMIT_TIM1H		0x35	; (104uS/b*8bit/byt*16byt/frame+250uS+xx+ switch RX-TX) C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           #define	RXMIT_TIM1L		0xf0	;20ms includes delays for the master switch RX -> TX   C:\Embedded\Rover\rover.h
                                           #define	RXMIT_TIM1H		0x55	;                                                      C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           ;LOCK TIMEOUTS (this is a 16 bit integer e.g. 01FF)                              C:\Embedded\Rover\rover.h
                                           #define	LOCK1			0xFF                                                             C:\Embedded\Rover\rover.h
                                           #define	LOCK2			0x01                                                             C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           ;TOGGLES AND CONTROLS FOR LEDS                                                   C:\Embedded\Rover\rover.h
                                           ;#define TOGGLE_G		L_GREEN_CTL,7                                                 C:\Embedded\Rover\rover.h
                                           ;#define	GREEN_FLAG		L_GREEN_CTL,6                                               C:\Embedded\Rover\rover.h
                                           ;#define	SPEED_G			L_GREEN_CTL,5                                                 C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;#define TOGGLE_R		L_RED_CTL,7                                                   C:\Embedded\Rover\rover.h
                                           ;#define	RED_FLAG		L_RED_CTL,6                                                   C:\Embedded\Rover\rover.h
                                           ;#define	SPEED_R			L_RED_CTL,5                                                   C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;#define	SLOW_ON			b'11000110'		;1xx..=start on, x1x..=on, xx000110=6 beats      C:\Embedded\Rover\rover.h
                                           ;#define	SLOW_OFF		b'01000110'		;0xx..=start off, x1x..=on, xx000110=6 beats     C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;#define	FAST_ON			b'11000010'                                                   C:\Embedded\Rover\rover.h
                                           ;#define	FAST_OFF		b'01000010'                                                   C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;#define VERYSLOW		b'11010000'                                                   C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\Rover_master.ASM
                                           ;LOCAL DATA                                                                      C:\Embedded\Rover\Rover_master.ASM
                                           	UDATA                                                                           C:\Embedded\Rover\Rover_master.ASM
                                           L_Temp1			res 1 		;                                                              C:\Embedded\Rover\Rover_master.ASM
                                           TEMP_BYT0		res	1		;temporary storage                                             C:\Embedded\Rover\Rover_master.ASM
                                           L_Temp_CS		res	1		;temporary sum-check                                           C:\Embedded\Rover\Rover_master.ASM
                                           L_BITS			res 1		;number of bits sent or received                                 C:\Embedded\Rover\Rover_master.ASM
                                           L_BYTES			res 1		;number of bytes sent or received                               C:\Embedded\Rover\Rover_master.ASM
                                           L_TX_COUNT		res	1		;TX_BUFFER counter                                            C:\Embedded\Rover\Rover_master.ASM
                                           L_NEXT_FR_BYT	res	1		;counts the byte in the TX buffer                           C:\Embedded\Rover\Rover_master.ASM
                                           L_INDEX			res 1		;index for addressing buffers below                             C:\Embedded\Rover\Rover_master.ASM
                                           L_PORTC			res 1		;temporary PORTC                                                C:\Embedded\Rover\Rover_master.ASM
                                           L_DATA_RX		res 1		;1 byte of received data                                       C:\Embedded\Rover\Rover_master.ASM
                                           L_RX_BUFF		res d'16'	;Received data buffer                                       C:\Embedded\Rover\Rover_master.ASM
                                           L_TX_BUFF		res d'16'	;Transmit data buffer                                       C:\Embedded\Rover\Rover_master.ASM
                                           L_PERSIST		res	1		;counter for persistancy checks                                C:\Embedded\Rover\Rover_master.ASM
                                           ;                                                                                C:\Embedded\Rover\Rover_master.ASM
                                           G_Events 		res 1		;This has to be seen by other modules                          C:\Embedded\Rover\Rover_master.ASM
                                           G_Pr_status		res 1 		;                                                           C:\Embedded\Rover\Rover_master.ASM
                                           G_State			res 1		;will determine the reaction in ISR                             C:\Embedded\Rover\Rover_master.ASM
                                           ;                                                                                C:\Embedded\Rover\Rover_master.ASM
                                           D_ERROR_CNT		res	1		;Counts number of times in TREAT_ERROR                       C:\Embedded\Rover\Rover_master.ASM
                                           D_ERROR_FLG		res	1		;Manual flag to read all CC1000 regs in TREAT_ERROR          C:\Embedded\Rover\Rover_master.ASM
                                           D_BUGGGER		res	1		;                                                              C:\Embedded\Rover\Rover_master.ASM
                                           ;                                                                                C:\Embedded\Rover\Rover_master.ASM
                                           STATUS_TEMP		res 1		;for saving STATUS reg during ISR                            C:\Embedded\Rover\Rover_master.ASM
                                           ;========================================================================================= C:\Embedded\Rover\Rover_master.ASM
                                           DEBUG_BITS		res	1                                                                C:\Embedded\Rover\Rover_master.ASM
                                           D_BUG1			res	1		;                                                                C:\Embedded\Rover\Rover_master.ASM
                                           D_BUG2			res	1		;                                                                C:\Embedded\Rover\Rover_master.ASM
                                           ;========================================================================================== C:\Embedded\Rover\Rover_master.ASM
                                           	UDATA_SHR				;Common bank                                                       C:\Embedded\Rover\Rover_master.ASM
                                           L_EE_COUNT_L	res	1		;This has to be @ addr xxxxxx00 BUT the linker puts it in x71!!! C:\Embedded\Rover\Rover_master.ASM
                                           L_EE_COUNT_H	res	1		;These reserve 8 bytes for data transfer with EEPROM         C:\Embedded\Rover\Rover_master.ASM
                                           L_EE_COUNT_MORE	res	6		;                                                         C:\Embedded\Rover\Rover_master.ASM
                                           W_TEMP			res	1		;for saving W reg during ISR                                     C:\Embedded\Rover\Rover_master.ASM
                                           ;                                                                                C:\Embedded\Rover\Rover_master.ASM
                                           ;EXTERNAL AND GLOBAL SYMBOLS                                                     C:\Embedded\Rover\Rover_master.ASM
                                           			Global	G_Events,G_Pr_status                                                   C:\Embedded\Rover\Rover_master.ASM
                                           			extern	G_CC_Reg,G_CC_Data                                                     C:\Embedded\Rover\Rover_master.ASM
                                                                                                                            C:\Embedded\Rover\Rover_master.ASM
                                           ;LIBRARY SUPPORT ROUTINES                                                        C:\Embedded\Rover\Rover_master.ASM
                                           	extern	Setup_CC1000PD,Reset_CC1000,Setup_CC1000All,CalibrateCC1000              C:\Embedded\Rover\Rover_master.ASM
                                           	extern	SetupCC1000Tx,SetupCC1000Rx,WakeUpCC1000toRx,WakeUpCC1000toTx            C:\Embedded\Rover\Rover_master.ASM
                                           	extern	DelaymS,Delay100uS,DelayuS                                               C:\Embedded\Rover\Rover_master.ASM
                                           	extern	ReadFromCC1000register                                                   C:\Embedded\Rover\Rover_master.ASM
                                           	                                                                                C:\Embedded\Rover\Rover_master.ASM
002007   3f36     ADDLW     0x36           	__CONFIG	 _CP_OFF & _WDT_ON & _BODEN_OFF & _PWRTE_ON & _HS_OSC  & _LVP_OFF  & _CPD_OFF C:\Embedded\Rover\Rover_master.ASM
                                                                                                                            C:\Embedded\Rover\Rover_master.ASM
                                           	CODE                                                                            C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           START_OF_THE_PROGRAM                                                             C:\Embedded\Rover\Rover_master.ASM
                                           			org		0X000				; Reset Vector                                                  C:\Embedded\Rover\Rover_master.ASM
                                                                                                                            C:\Embedded\Rover\Rover_master.ASM
000000   0000     NOP                      			nop							;                                                                   C:\Embedded\Rover\Rover_master.ASM
000001   018a     CLRF      0xa            			clrf	PCLATH				;                                                              C:\Embedded\Rover\Rover_master.ASM
000002   2836     GOTO      0x36           			goto	Start				;                                                               C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           			org		0x004				;Iterrupt Vector                                                C:\Embedded\Rover\Rover_master.ASM
000004   28a7     GOTO      0xa7           			goto	TREAT_ERROR			;We do not expect interrupts!                              C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           ;Table lookups for CC1000 register                                               C:\Embedded\Rover\Rover_master.ASM
                                           ;Lookout for page boundaries!!!!!                                                C:\Embedded\Rover\Rover_master.ASM
                                           GET_NEXT_REGISTER                                                                C:\Embedded\Rover\Rover_master.ASM
                                           			Global	GET_NEXT_REGISTER	;                                                    C:\Embedded\Rover\Rover_master.ASM
000005   0782     ADDWF     0x2,0x1        			ADDWF	PCL,F				;                                                              C:\Embedded\Rover\Rover_master.ASM
                                           										;	                                                                     C:\Embedded\Rover\Rover_master.ASM
000006   3400     RETLW     0x0            CC1Kregs	DATA 0x3400,0x3458,0x3420,0x3400,0x3442,0x3414,0x349c,0x3402	;Rf XTAL: 14.745600 C:\Embedded\Rover\Rover_master.ASM
000007   3458     RETLW     0x58                                                                                            
000008   3420     RETLW     0x20                                                                                            
000009   3400     RETLW     0x0                                                                                             
00000a   3442     RETLW     0x42                                                                                            
00000b   3414     RETLW     0x14                                                                                            
00000c   349c     RETLW     0x9c                                                                                            
00000d   3402     RETLW     0x2                                                                                             
00000e   3480     RETLW     0x80           			DATA 0x3480,0x3444,0x3412,0x34FF,0x3460,0x3410,0x3426,0x348E	;PA_POW<0BH>=FF  C:\Embedded\Rover\Rover_master.ASM
00000f   3444     RETLW     0x44                                                                                            
000010   3412     RETLW     0x12                                                                                            
000011   34ff     RETLW     0xff                                                                                            
000012   3460     RETLW     0x60                                                                                            
000013   3410     RETLW     0x10                                                                                            
000014   3426     RETLW     0x26                                                                                            
000015   348e     RETLW     0x8e                                                                                            
000016   346f     RETLW     0x6f           			DATA 0x346F,0x3447,0x3470,0x3401,0x3400,0x3400,0x3400,0x3400	;MODEM0<11H>     C:\Embedded\Rover\Rover_master.ASM
000017   3447     RETLW     0x47                                                                                            
000018   3470     RETLW     0x70                                                                                            
000019   3401     RETLW     0x1                                                                                             
00001a   3400     RETLW     0x0                                                                                             
00001b   3400     RETLW     0x0                                                                                             
00001c   3400     RETLW     0x0                                                                                             
00001d   3400     RETLW     0x0                                                                                             
00001e   3400     RETLW     0x0            			DATA 0x3400,0x3400,0x3400,0x3400,0x3400                                       C:\Embedded\Rover\Rover_master.ASM
00001f   3400     RETLW     0x0                                                                                             
000020   3400     RETLW     0x0                                                                                             
000021   3400     RETLW     0x0                                                                                             
000022   3400     RETLW     0x0                                                                                             
                                           			Global	CC1Kregs			;                                                           C:\Embedded\Rover\Rover_master.ASM
000023   0008     RETURN                   			RETURN 	                                                                      C:\Embedded\Rover\Rover_master.ASM
                                                                                                                            C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           ;Table lookup, build a frame of data                                             C:\Embedded\Rover\Rover_master.ASM
                                           RAW_BUFFER                                                                       C:\Embedded\Rover\Rover_master.ASM
                                           			Global	RAW_BUFFER			;                                                         C:\Embedded\Rover\Rover_master.ASM
000024   0782     ADDWF     0x2,0x1        			ADDWF	PCL,F				;                                                              C:\Embedded\Rover\Rover_master.ASM
                                           										;	                                                                     C:\Embedded\Rover\Rover_master.ASM
000025   34aa     RETLW     0xaa           Comm_buffer	DATA 0x34AA,0x34AA,0x34AA,0x34CD,0x344D,0x3400,0x3400,0x3407	;whole frame C:\Embedded\Rover\Rover_master.ASM
000026   34aa     RETLW     0xaa                                                                                            
000027   34aa     RETLW     0xaa                                                                                            
000028   34cd     RETLW     0xcd                                                                                            
000029   344d     RETLW     0x4d                                                                                            
00002a   3400     RETLW     0x0                                                                                             
00002b   3400     RETLW     0x0                                                                                             
00002c   3407     RETLW     0x7                                                                                             
00002d   3400     RETLW     0x0            			DATA 0x3400,0x3400,0x3400,0x3400,0x3400,0x3400,0x3400,0x3400                  C:\Embedded\Rover\Rover_master.ASM
00002e   3400     RETLW     0x0                                                                                             
00002f   3400     RETLW     0x0                                                                                             
000030   3400     RETLW     0x0                                                                                             
000031   3400     RETLW     0x0                                                                                             
000032   3400     RETLW     0x0                                                                                             
000033   3400     RETLW     0x0                                                                                             
000034   3400     RETLW     0x0                                                                                             
                                           			Global	Comm_buffer			;                                                        C:\Embedded\Rover\Rover_master.ASM
000035   0008     RETURN                   			RETURN 	                                                                      C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           ;Program execution starts here                                                   C:\Embedded\Rover\Rover_master.ASM
                                           Start									;Setup MCU                                                         C:\Embedded\Rover\Rover_master.ASM
000036   0183     CLRF      0x3            			CLRF	STATUS				;BANK 0                                                        C:\Embedded\Rover\Rover_master.ASM
000037   3033     MOVLW     0x33           			MOVLW	(D_BUG2-L_Temp_CS)+1;Clears all varialble data including                C:\Embedded\Rover\Rover_master.ASM
000038   00a0     MOVWF     0x20           			MOVWF	L_Temp1				; RX and TX buffers, L_Temp1 is used                         C:\Embedded\Rover\Rover_master.ASM
000039   3022     MOVLW     0x22           			MOVLW	L_Temp_CS			;                                                           C:\Embedded\Rover\Rover_master.ASM
00003a   0084     MOVWF     0x4            			MOVWF	FSR					;                                                               C:\Embedded\Rover\Rover_master.ASM
00003b   0180     CLRF      0x0            _CLR_MEM	CLRF	INDF				;                                                          C:\Embedded\Rover\Rover_master.ASM
00003c   0a84     INCF      0x4,0x1        			INCF	FSR,F				;                                                               C:\Embedded\Rover\Rover_master.ASM
00003d   0ba0     DECFSZ    0x20,0x1       			DECFSZ	L_Temp1,F			;                                                          C:\Embedded\Rover\Rover_master.ASM
00003e   283b     GOTO      0x3b           			GOTO	_CLR_MEM			;                                                             C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
00003f   1683     BSF       0x3,0x5        			BANKSEL TRISA				;BANK 1 REGISTERS                                            C:\Embedded\Rover\Rover_master.ASM
000040   1303     BCF       0x3,0x6                                                                                         
000041   30ce     MOVLW     0xce           			MOVLW	b'11001110'			;PortB pullups disabled,                                  C:\Embedded\Rover\Rover_master.ASM
000042   0081     MOVWF     0x1            			MOVWF	OPTION_REG			;xxxx111xb prescaler to WDT,1:128                          C:\Embedded\Rover\Rover_master.ASM
000043   3003     MOVLW     0x3            			MOVLW	b'00000011'			;                                                         C:\Embedded\Rover\Rover_master.ASM
000044   008e     MOVWF     0xe            			MOVWF	PCON				;power-on, brown-out resets                                     C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
                                           ;IO ports ports for the interface with CC1000 are different between master and slave - swee PALE and PCLK C:\Embedded\Rover\Rover_master.ASM
000045   30ff     MOVLW     0xff           			MOVLW	0xFF				;RA0=AN0,RA1,AN1,RA3=Vref                                       C:\Embedded\Rover\Rover_master.ASM
000046   0085     MOVWF     0x5            			MOVWF	TRISA				;                                                              C:\Embedded\Rover\Rover_master.ASM
000047   30ff     MOVLW     0xff           			MOVLW	0xFF				;RB0=DCLK,RB1=SW1,RB2=SW2,RB3=SW3                               C:\Embedded\Rover\Rover_master.ASM
000048   0086     MOVWF     0x6            			MOVWF	TRISB				;(read INTF INTCON<1> for external INT on RB0)                 C:\Embedded\Rover\Rover_master.ASM
000049   30f0     MOVLW     0xf0           			MOVLW	0xF0				;RC<0,1,2,3>=PDATA,PCLK,PALE,DIO = out                          C:\Embedded\Rover\Rover_master.ASM
00004a   0087     MOVWF     0x7            			MOVWF	TRISC				;                                                              C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
00004b   3019     MOVLW     0x19           			MOVLW	25					;4Mhz,9.6Kb                                                      C:\Embedded\Rover\Rover_master.ASM
00004c   0099     MOVWF     0x19           			MOVWF	SPBRG				;not necessary when running synchronous slave                  C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
00004d   3000     MOVLW     0x0            			MOVLW	b'00000000'			;MCU is slave,8bit,TxEN,Async,high speed,                 C:\Embedded\Rover\Rover_master.ASM
00004e   0098     MOVWF     0x18           			MOVWF	TXSTA				;                                                              C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
00004f   3000     MOVLW     0x0            			MOVLW	b'00000000'			;                                                         C:\Embedded\Rover\Rover_master.ASM
000050   008c     MOVWF     0xc            			MOVWF	PIE1				;TMR1 int disabled (xxxxxxx1)                                   C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000051   1283     BCF       0x3,0x5        			BANKSEL L_Temp1				;BANK 0 REGISTERS                                          C:\Embedded\Rover\Rover_master.ASM
000052   1303     BCF       0x3,0x6                                                                                         
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000053   0806     MOVF      0x6,0x0        			MOVFW	PORTB				;                                                              C:\Embedded\Rover\Rover_master.ASM
000054   01f1     CLRF      0x71           			CLRF	L_EE_COUNT_L		;                                                          C:\Embedded\Rover\Rover_master.ASM
000055   0194     CLRF      0x14           			CLRF	SSPCON				;disable serial port                                           C:\Embedded\Rover\Rover_master.ASM
000056   0198     CLRF      0x18           			CLRF	RCSTA				;Serial port disabled(bit banging)                              C:\Embedded\Rover\Rover_master.ASM
000057   018b     CLRF      0xb            			CLRF	INTCON				;                                                              C:\Embedded\Rover\Rover_master.ASM
000058   0185     CLRF      0x5            			CLRF	PORTA				;                                                               C:\Embedded\Rover\Rover_master.ASM
000059   0186     CLRF      0x6            			CLRF	PORTB				;                                                               C:\Embedded\Rover\Rover_master.ASM
00005a   0187     CLRF      0x7            			CLRF	PORTC				;                                                               C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
                                           ;A/D CONVERTER							;                                                           C:\Embedded\Rover\Rover_master.ASM
                                           ;=============							;                                                           C:\Embedded\Rover\Rover_master.ASM
00005b   3081     MOVLW     0x81           			MOVLW	b'10000001'			;(see ADCON1 for bits adcon0<7,6> ; bits 5-3=channel selection; C:\Embedded\Rover\Rover_master.ASM
00005c   009f     MOVWF     0x1f           			MOVWF	ADCON0				;  A/D powered on                                             C:\Embedded\Rover\Rover_master.ASM
00005d   1683     BSF       0x3,0x5        			BSF		STATUS,RP0			;                                                           C:\Embedded\Rover\Rover_master.ASM
00005e   3044     MOVLW     0x44           			MOVLW	b'01000100'			;left justtified,fosc/64,3andl/0 vref...                  C:\Embedded\Rover\Rover_master.ASM
00005f   009f     MOVWF     0x1f           			MOVWF	ADCON1				;                                                             C:\Embedded\Rover\Rover_master.ASM
000060   1283     BCF       0x3,0x5        			BCF		STATUS,RP0			;                                                           C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000061   174b     BSF       0x4b,0x6       			BSF		CALIBRATION_OK		;                                                        C:\Embedded\Rover\Rover_master.ASM
                                           										;start of CC1000 initialization                                        C:\Embedded\Rover\Rover_master.ASM
000062   2161     CALL      0x161          			CALL	Setup_CC1000PD		;Setup after Power down CC1000                           C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000063   216b     CALL      0x16b          			CALL	Reset_CC1000		;Reset it  [(A) and (B) fig 16]                            C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000064   3006     MOVLW     0x6            			MOVLW	CC1Kregs 			;                                                           C:\Embedded\Rover\Rover_master.ASM
000065   2179     CALL      0x179          			CALL	Setup_CC1000All		;Setup all other 28 registers [(C) fig 16]              C:\Embedded\Rover\Rover_master.ASM
000066   20a7     CALL      0xa7           			CALL	TREAT_ERROR			;                                                          C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000067   3044     MOVLW     0x44           			MOVLW	RX_CURRENT			;                                                          C:\Embedded\Rover\Rover_master.ASM
000068   2188     CALL      0x188          			CALL	WakeUpCC1000toRx	;Start calibration (A....G) fig 17)                     C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000069   3044     MOVLW     0x44           			MOVLW	RX_CURRENT			;                                                          C:\Embedded\Rover\Rover_master.ASM
00006a   21cf     CALL      0x1cf          			CALL	SetupCC1000Rx		;                                                         C:\Embedded\Rover\Rover_master.ASM
00006b   1f4b     BTFSS     0x4b,0x6       			BTFSS	CALIBRATION_OK		;                                                       C:\Embedded\Rover\Rover_master.ASM
00006c   2877     GOTO      0x77           			GOTO	_CAL_ENDED			;                                                           C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
00006d   222b     CALL      0x22b          			CALL	CalibrateCC1000		;Single calibration as TX                               C:\Embedded\Rover\Rover_master.ASM
00006e   1f4b     BTFSS     0x4b,0x6       			BTFSS	CALIBRATION_OK		;                                                       C:\Embedded\Rover\Rover_master.ASM
00006f   2877     GOTO      0x77           			GOTO	_CAL_ENDED			;                                                           C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000070   3081     MOVLW     0x81           			MOVLW	TX_CURRENT			;                                                          C:\Embedded\Rover\Rover_master.ASM
000071   21ab     CALL      0x1ab          			CALL	WakeUpCC1000toTx	;                                                       C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000072   3081     MOVLW     0x81           			MOVLW	TX_CURRENT			;                                                          C:\Embedded\Rover\Rover_master.ASM
000073   21f9     CALL      0x1f9          			CALL	SetupCC1000Tx		;Switch to Tx                                             C:\Embedded\Rover\Rover_master.ASM
000074   1f4b     BTFSS     0x4b,0x6       			BTFSS	CALIBRATION_OK		;                                                       C:\Embedded\Rover\Rover_master.ASM
000075   2877     GOTO      0x77           			GOTO	_CAL_ENDED			;                                                           C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000076   222b     CALL      0x22b          			CALL	CalibrateCC1000		;Single calibration  [(D) and (E) FIG 16]               C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000077   1f4b     BTFSS     0x4b,0x6       _CAL_ENDED	BTFSS	CALIBRATION_OK		;                                               C:\Embedded\Rover\Rover_master.ASM
000078   20a7     CALL      0xa7           			CALL	TREAT_ERROR			;                                                          C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000079   3080     MOVLW     0x80           			MOVLW	0x80				;enable GIE<7>                                                  C:\Embedded\Rover\Rover_master.ASM
00007a   008b     MOVWF     0xb            			MOVWF	INTCON				;clear TMR0IF<2>,INTF<1>,RBIF<0>,PEIE<6>,                     C:\Embedded\Rover\Rover_master.ASM
00007b   16cb     BSF       0x4b,0x5       			BSF		RESET_CNTRS			;                                                          C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
                                           ;Master continually reads the analogue inputs,the switches and sends them to the slave. C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
00007c   1ecb     BTFSS     0x4b,0x5       _IDLE_LOOP	BTFSS	RESET_CNTRS			;                                                 C:\Embedded\Rover\Rover_master.ASM
00007d   2886     GOTO      0x86           			GOTO	_MASTER_SEND		;                                                          C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
00007e   01a4     CLRF      0x24           _RESET		CLRF	L_BYTES				;Start all over                                          C:\Embedded\Rover\Rover_master.ASM
00007f   3008     MOVLW     0x8            			MOVLW	8					;                                                                 C:\Embedded\Rover\Rover_master.ASM
000080   00a3     MOVWF     0x23           			MOVWF	L_BITS				;Initialize bit counter                                       C:\Embedded\Rover\Rover_master.ASM
000081   01a7     CLRF      0x27           			CLRF	L_INDEX				;                                                             C:\Embedded\Rover\Rover_master.ASM
000082   124b     BCF       0x4b,0x4       			BCF		BYTE_FULL			;                                                            C:\Embedded\Rover\Rover_master.ASM
000083   12cb     BCF       0x4b,0x5       			BCF		RESET_CNTRS			;                                                          C:\Embedded\Rover\Rover_master.ASM
000084   20b1     CALL      0xb1           			CALL	GET_DATA			;get new frame of data to send                                C:\Embedded\Rover\Rover_master.ASM
000085   0000     NOP                      			NOP                                                                           C:\Embedded\Rover\Rover_master.ASM
                                           _MASTER_SEND							;                                                             C:\Embedded\Rover\Rover_master.ASM
000086   0064     CLRWDT                   			CLRWDT						;Clear watch dog                                                  C:\Embedded\Rover\Rover_master.ASM
000087   1806     BTFSC     0x6,0x0        			BTFSC	DCLK				;IF DCLCLK PULSE (CC1000 rdy to receive?)                       C:\Embedded\Rover\Rover_master.ASM
000088   288e     GOTO      0x8e           			GOTO	_COMMS_END			;                                                           C:\Embedded\Rover\Rover_master.ASM
000089   208f     CALL      0x8f           			CALL	SEND_BIT			;                                                             C:\Embedded\Rover\Rover_master.ASM
00008a   1e4b     BTFSS     0x4b,0x4       			BTFSS	BYTE_FULL			;                                                           C:\Embedded\Rover\Rover_master.ASM
00008b   288e     GOTO      0x8e           			GOTO	_COMMS_END			;                                                           C:\Embedded\Rover\Rover_master.ASM
00008c   20ab     CALL      0xab           			CALL	CHECK_MST_EOTX		;                                                        C:\Embedded\Rover\Rover_master.ASM
00008d   124b     BCF       0x4b,0x4       			BCF		BYTE_FULL			;                                                            C:\Embedded\Rover\Rover_master.ASM
00008e   287c     GOTO      0x7c           _COMMS_END	GOTO	_IDLE_LOOP			;                                                   C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           ;Send the next bit in L_TX_BUFF(L_INDEX,L_BITS)                                  C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           SEND_BIT								;                                                                C:\Embedded\Rover\Rover_master.ASM
00008f   300c     MOVLW     0xc            			MOVLW	d'12'				;persistancy check 50us                                        C:\Embedded\Rover\Rover_master.ASM
000090   00ca     MOVWF     0x4a           			MOVWF	L_PERSIST			;                                                           C:\Embedded\Rover\Rover_master.ASM
000091   1806     BTFSC     0x6,0x0        _DCLK_OUT	BTFSC	DCLK				;                                                        C:\Embedded\Rover\Rover_master.ASM
000092   28a6     GOTO      0xa6           			GOTO	_NO_BIT_OUT			;ignore spikes                                             C:\Embedded\Rover\Rover_master.ASM
000093   0bca     DECFSZ    0x4a,0x1       			DECFSZ	L_PERSIST,F			;                                                        C:\Embedded\Rover\Rover_master.ASM
000094   2891     GOTO      0x91           			GOTO	_DCLK_OUT			;                                                            C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
000095   0827     MOVF      0x27,0x0       _TX_CONT	MOVF	L_INDEX,W			;                                                      C:\Embedded\Rover\Rover_master.ASM
000096   3e3a     ADDLW     0x3a           			ADDLW	L_TX_BUFF			;                                                           C:\Embedded\Rover\Rover_master.ASM
000097   0084     MOVWF     0x4            			MOVWF	FSR					;Data to send: L_TX_BUFFER(L_INDEX<L_BITS>)                     C:\Embedded\Rover\Rover_master.ASM
000098   0d80     RLF       0x0,0x1        			RLF		INDF,F				;                                                              C:\Embedded\Rover\Rover_master.ASM
000099   1c03     BTFSS     0x3,0x0        			BTFSS	STATUS,C			;CARRY?                                                      C:\Embedded\Rover\Rover_master.ASM
00009a   289d     GOTO      0x9d           			GOTO	_CLR_DIO			;                                                             C:\Embedded\Rover\Rover_master.ASM
00009b   1587     BSF       0x7,0x3        			BSF		DIO					;                                                                C:\Embedded\Rover\Rover_master.ASM
00009c   289e     GOTO      0x9e           			GOTO	$+2					;                                                                C:\Embedded\Rover\Rover_master.ASM
00009d   1187     BCF       0x7,0x3        _CLR_DIO	BCF		DIO					;                                                          C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
00009e   0ba3     DECFSZ    0x23,0x1       			DECFSZ	L_BITS,F			;8 bits sent?                                               C:\Embedded\Rover\Rover_master.ASM
00009f   28a5     GOTO      0xa5           			GOTO	_OUT_END			;                                                             C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
0000a0   164b     BSF       0x4b,0x4       			BSF		BYTE_FULL			;                                                            C:\Embedded\Rover\Rover_master.ASM
0000a1   0aa4     INCF      0x24,0x1       			INCF	L_BYTES,F			;Prepare to send the next byte                               C:\Embedded\Rover\Rover_master.ASM
0000a2   0aa7     INCF      0x27,0x1       			INCF	L_INDEX,F			;                                                            C:\Embedded\Rover\Rover_master.ASM
0000a3   3008     MOVLW     0x8            			MOVLW	8					;                                                                 C:\Embedded\Rover\Rover_master.ASM
0000a4   00a3     MOVWF     0x23           			MOVWF	L_BITS				;reset bit count                                              C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
0000a5   108b     BCF       0xb,0x1        _OUT_END	BCF		INTCON,INTF			;                                                    C:\Embedded\Rover\Rover_master.ASM
0000a6   0008     RETURN                   _NO_BIT_OUT	RETURN						;                                                        C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           ;This is a good place to set a breaks in case of error                           C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           TREAT_ERROR                                                                      C:\Embedded\Rover\Rover_master.ASM
                                           			Global	TREAT_ERROR                                                            C:\Embedded\Rover\Rover_master.ASM
0000a7   0000     NOP                      			nop							;                                                                   C:\Embedded\Rover\Rover_master.ASM
                                           #IFDEF	DEBUG_MODE                                                                C:\Embedded\Rover\Rover_master.ASM
                                           			bsf		D_ERROR_FLG,0		;Set this flag to 1 while in debugging mode               C:\Embedded\Rover\Rover_master.ASM
                                           			btfss	D_ERROR_FLG,0		;Set this flag to 1 while in debugging mode              C:\Embedded\Rover\Rover_master.ASM
                                           			GOTO	_SKIP_REGS			;                                                           C:\Embedded\Rover\Rover_master.ASM
                                           			clrf	D_BUGGGER			;                                                            C:\Embedded\Rover\Rover_master.ASM
                                           _read_all	movf	D_BUGGGER,w			;                                                   C:\Embedded\Rover\Rover_master.ASM
                                           			movwf	G_CC_Reg			;read all regs 1 by 1                                        C:\Embedded\Rover\Rover_master.ASM
                                           			sublw	d'28'				;                                                              C:\Embedded\Rover\Rover_master.ASM
                                           			btfss	STATUS,C			;                                                            C:\Embedded\Rover\Rover_master.ASM
                                           			goto	_SKIP_REGS			;                                                           C:\Embedded\Rover\Rover_master.ASM
                                           			call	ReadFromCC1000register                                                   C:\Embedded\Rover\Rover_master.ASM
                                           			movf	G_CC_Data,w			;                                                          C:\Embedded\Rover\Rover_master.ASM
                                           BREAKPOINT_ON_ERROR:                                                             C:\Embedded\Rover\Rover_master.ASM
                                           			nop							;READ THE REGISTER on w                                             C:\Embedded\Rover\Rover_master.ASM
                                           			incf	D_BUGGGER,f			;                                                          C:\Embedded\Rover\Rover_master.ASM
                                           			goto	_read_all			;                                                            C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
                                           #ENDIF                                                                           C:\Embedded\Rover\Rover_master.ASM
0000a8   0ace     INCF      0x4e,0x1       _SKIP_REGS	incf	D_ERROR_CNT,F		;count transmission errors										;             C:\Embedded\Rover\Rover_master.ASM
0000a9   16cb     BSF       0x4b,0x5       			bsf		RESET_CNTRS			;                                                          C:\Embedded\Rover\Rover_master.ASM
0000aa   0008     RETURN                   			RETURN                                                                        C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           ;See oif we're finished sending a frame of data                                  C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           CHECK_MST_EOTX							;                                                           C:\Embedded\Rover\Rover_master.ASM
0000ab   0827     MOVF      0x27,0x0       			MOVF	L_INDEX,W			;                                                            C:\Embedded\Rover\Rover_master.ASM
0000ac   3a10     XORLW     0x10           			XORLW	TOT_FRAME_SIZ		;	                                                       C:\Embedded\Rover\Rover_master.ASM
0000ad   1d03     BTFSS     0x3,0x2        			BTFSS	STATUS,Z			;                                                            C:\Embedded\Rover\Rover_master.ASM
0000ae   28b0     GOTO      0xb0           			GOTO	$+2					;still sending bits...                                           C:\Embedded\Rover\Rover_master.ASM
0000af   16cb     BSF       0x4b,0x5       			BSF		RESET_CNTRS			;                                                          C:\Embedded\Rover\Rover_master.ASM
0000b0   0008     RETURN                   			RETURN						;                                                                 C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           ;Get a frame of data and put it int the TX_BUFFER, calculate and fill the check sum C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           GET_DATA								;                                                                C:\Embedded\Rover\Rover_master.ASM
0000b1   01a7     CLRF      0x27           			CLRF	L_INDEX				;                                                             C:\Embedded\Rover\Rover_master.ASM
0000b2   01a2     CLRF      0x22           			CLRF	L_Temp_CS			;                                                            C:\Embedded\Rover\Rover_master.ASM
0000b3   01a6     CLRF      0x26           			CLRF	L_NEXT_FR_BYT		;number of frame bytes                                    C:\Embedded\Rover\Rover_master.ASM
0000b4   303a     MOVLW     0x3a           			MOVLW	L_TX_BUFF			;                                                           C:\Embedded\Rover\Rover_master.ASM
0000b5   0726     ADDWF     0x26,0x0       			ADDWF	L_NEXT_FR_BYT,W		;                                                      C:\Embedded\Rover\Rover_master.ASM
0000b6   0084     MOVWF     0x4            			MOVWF	FSR					;INDF -> L_TX_BUFF (Dest)                                       C:\Embedded\Rover\Rover_master.ASM
0000b7   300f     MOVLW     0xf            			MOVLW	(TOT_FRAME_SIZ-1)	;                                                     C:\Embedded\Rover\Rover_master.ASM
0000b8   00a5     MOVWF     0x25           			MOVWF	L_TX_COUNT			;                                                          C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
0000b9   3000     MOVLW     0x0            _TX_COPY	MOVLW	HIGH RAW_BUFFER		;Copy the empty buffer                           C:\Embedded\Rover\Rover_master.ASM
0000ba   008a     MOVWF     0xa            			MOVWF	PCLATH				;                                                             C:\Embedded\Rover\Rover_master.ASM
0000bb   0826     MOVF      0x26,0x0       			MOVF	L_NEXT_FR_BYT,W		;                                                       C:\Embedded\Rover\Rover_master.ASM
0000bc   2024     CALL      0x24           			CALL	RAW_BUFFER			;                                                           C:\Embedded\Rover\Rover_master.ASM
0000bd   0080     MOVWF     0x0            			MOVWF	INDF				;                                                               C:\Embedded\Rover\Rover_master.ASM
0000be   07a2     ADDWF     0x22,0x1       			ADDWF	L_Temp_CS,F			;compute provisional check sum                            C:\Embedded\Rover\Rover_master.ASM
0000bf   0a84     INCF      0x4,0x1        			INCF	FSR,F				;                                                               C:\Embedded\Rover\Rover_master.ASM
0000c0   0aa6     INCF      0x26,0x1       			INCF	L_NEXT_FR_BYT,F		;                                                       C:\Embedded\Rover\Rover_master.ASM
0000c1   0ba5     DECFSZ    0x25,0x1       			DECFSZ	L_TX_COUNT,F		;                                                        C:\Embedded\Rover\Rover_master.ASM
0000c2   28b9     GOTO      0xb9           			GOTO	_TX_COPY			;                                                             C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
0000c3   3080     MOVLW     0x80           			MOVLW	b'10000000'			;GET AN0                                                  C:\Embedded\Rover\Rover_master.ASM
0000c4   20e3     CALL      0xe3           			CALL	GET_A_D				;                                                             C:\Embedded\Rover\Rover_master.ASM
0000c5   3048     MOVLW     0x48           			MOVLW	L_TX_BUFF+0xE		;offset to payload data: AN0                             C:\Embedded\Rover\Rover_master.ASM
0000c6   0084     MOVWF     0x4            			MOVWF	FSR					;                                                               C:\Embedded\Rover\Rover_master.ASM
0000c7   081e     MOVF      0x1e,0x0       			MOVF	ADRESH,W			;                                                             C:\Embedded\Rover\Rover_master.ASM
0000c8   0080     MOVWF     0x0            			MOVWF	INDF				;                                                               C:\Embedded\Rover\Rover_master.ASM
0000c9   07a2     ADDWF     0x22,0x1       			ADDWF	L_Temp_CS,F			;                                                         C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
0000ca   3088     MOVLW     0x88           			MOVLW	b'10001000'			;GET AN1                                                  C:\Embedded\Rover\Rover_master.ASM
0000cb   20e3     CALL      0xe3           			CALL	GET_A_D				;                                                             C:\Embedded\Rover\Rover_master.ASM
0000cc   3047     MOVLW     0x47           			MOVLW	L_TX_BUFF+0xD		;offset to payload data: AN1                             C:\Embedded\Rover\Rover_master.ASM
0000cd   0084     MOVWF     0x4            			MOVWF	FSR					;                                                               C:\Embedded\Rover\Rover_master.ASM
0000ce   081e     MOVF      0x1e,0x0       			MOVF	ADRESH,W			;                                                             C:\Embedded\Rover\Rover_master.ASM
0000cf   0080     MOVWF     0x0            			MOVWF	INDF				;                                                               C:\Embedded\Rover\Rover_master.ASM
0000d0   07a2     ADDWF     0x22,0x1       			ADDWF	L_Temp_CS,F			;                                                         C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
0000d1   01a1     CLRF      0x21           			CLRF	TEMP_BYT0			;                                                            C:\Embedded\Rover\Rover_master.ASM
0000d2   0806     MOVF      0x6,0x0        			MOVFW	PORTB				;read the port to clear it!!!!                                 C:\Embedded\Rover\Rover_master.ASM
0000d3   1886     BTFSC     0x6,0x1        			BTFSC	SW1					;                                                               C:\Embedded\Rover\Rover_master.ASM
0000d4   1421     BSF       0x21,0x0       			BSF		TEMP_BYT0,0			;                                                          C:\Embedded\Rover\Rover_master.ASM
0000d5   1906     BTFSC     0x6,0x2        			BTFSC	SW2					;                                                               C:\Embedded\Rover\Rover_master.ASM
0000d6   14a1     BSF       0x21,0x1       			BSF		TEMP_BYT0,1			;                                                          C:\Embedded\Rover\Rover_master.ASM
0000d7   1986     BTFSC     0x6,0x3        			BTFSC	SW3					;                                                               C:\Embedded\Rover\Rover_master.ASM
0000d8   1521     BSF       0x21,0x2       			BSF		TEMP_BYT0,2			;                                                          C:\Embedded\Rover\Rover_master.ASM
0000d9   3046     MOVLW     0x46           			MOVLW	L_TX_BUFF+0xC		;offset to payload data: SWITCHES                        C:\Embedded\Rover\Rover_master.ASM
0000da   0084     MOVWF     0x4            			MOVWF	FSR					;                                                               C:\Embedded\Rover\Rover_master.ASM
0000db   0821     MOVF      0x21,0x0       			MOVF	TEMP_BYT0,W			;                                                          C:\Embedded\Rover\Rover_master.ASM
0000dc   0080     MOVWF     0x0            			MOVWF	INDF				;                                                               C:\Embedded\Rover\Rover_master.ASM
0000dd   07a2     ADDWF     0x22,0x1       			ADDWF	L_Temp_CS,F			;                                                         C:\Embedded\Rover\Rover_master.ASM
                                           										;                                                                      C:\Embedded\Rover\Rover_master.ASM
0000de   3049     MOVLW     0x49           			MOVLW	L_TX_BUFF+SUM_CHECK	;                                                   C:\Embedded\Rover\Rover_master.ASM
0000df   0084     MOVWF     0x4            			MOVWF	FSR					;                                                               C:\Embedded\Rover\Rover_master.ASM
0000e0   0822     MOVF      0x22,0x0       			MOVF	L_Temp_CS,W			;                                                          C:\Embedded\Rover\Rover_master.ASM
0000e1   0080     MOVWF     0x0            			MOVWF	INDF				;                                                               C:\Embedded\Rover\Rover_master.ASM
0000e2   0008     RETURN                   			RETURN						;                                                                 C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           ;Read the analogue ports.                                                        C:\Embedded\Rover\Rover_master.ASM
                                           ;INPUT:		NONE                                                                    C:\Embedded\Rover\Rover_master.ASM
                                           ;OUTPUT:	INDF = analogue reading                                                 C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
                                           GET_A_D									;                                                                C:\Embedded\Rover\Rover_master.ASM
0000e3   009f     MOVWF     0x1f           			MOVWF	ADCON0				;                                                             C:\Embedded\Rover\Rover_master.ASM
0000e4   3001     MOVLW     0x1            			MOVLW	b'00000001'			;turn ON, A/D module                                      C:\Embedded\Rover\Rover_master.ASM
0000e5   049f     IORWF     0x1f,0x1       			IORWF	ADCON0,F			;                                                            C:\Embedded\Rover\Rover_master.ASM
0000e6   300c     MOVLW     0xc            			MOVLW	12					;                                                                C:\Embedded\Rover\Rover_master.ASM
0000e7   00a1     MOVWF     0x21           			MOVWF	TEMP_BYT0			;wait cycle                                                 C:\Embedded\Rover\Rover_master.ASM
0000e8   0ba1     DECFSZ    0x21,0x1       			DECFSZ	TEMP_BYT0,F			;2 CYC+2CYC=4*12=48us+ delay                             C:\Embedded\Rover\Rover_master.ASM
0000e9   28e8     GOTO      0xe8           			GOTO	$-1					;                                                                C:\Embedded\Rover\Rover_master.ASM
0000ea   151f     BSF       0x1f,0x2       _ADCON_GO	BSF		ADCON0,GO			;start conversion                                     C:\Embedded\Rover\Rover_master.ASM
0000eb   191f     BTFSC     0x1f,0x2       			BTFSC	ADCON0,GO			;                                                           C:\Embedded\Rover\Rover_master.ASM
0000ec   28eb     GOTO      0xeb           			GOTO	$-1					;                                                                C:\Embedded\Rover\Rover_master.ASM
0000ed   081e     MOVF      0x1e,0x0       _ADCON_RDY	MOVF	ADRESH,W			;8 MSB (ignore 2 LSBs in ADRESL)                      C:\Embedded\Rover\Rover_master.ASM
0000ee   0008     RETURN                   			RETURN						;                                                                 C:\Embedded\Rover\Rover_master.ASM
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Rover_master.ASM
0000ef   0000     NOP                      			nop			;WARNING: THIS NOPS ARE HERE TO COMPENSATE FOR ERRORS                   C:\Embedded\Rover\Rover_master.ASM
0000f0   0000     NOP                      			nop			; IN THE LINKER.  THE PROGRAM MUST > 100H BYTES LONG                    C:\Embedded\Rover\Rover_master.ASM
0000f1   0000     NOP                      			nop			; FOR THE LINKER TO WORK PROPERLY                                       C:\Embedded\Rover\Rover_master.ASM
0000f2   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000f3   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000f4   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000f5   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000f6   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000f7   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000f8   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000f9   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000fa   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000fb   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000fc   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000fd   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000fe   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
0000ff   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000100   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000101   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000102   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000103   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000104   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000105   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000106   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000107   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000108   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
000109   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
00010a   0000     NOP                      			nop                                                                           C:\Embedded\Rover\Rover_master.ASM
                                           			END		; of code                                                                C:\Embedded\Rover\Rover_master.ASM
                                           ;************************************************************                    C:\Embedded\Rover\CC1000_routines.asm
                                           ;	TITLE:	CC1000 assembler routines                                               C:\Embedded\Rover\CC1000_routines.asm
                                           ;	FILENAME:  CC1000_routines.asm                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;	REVISION HISTORY:  31-03-03 First try                                          C:\Embedded\Rover\CC1000_routines.asm
                                           ;	HARDWARE: BIT SRL. transciever                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;	FREQUENCY: 4MHz                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;	Function: Unlinked Object with Interfaces to CC1000                            C:\Embedded\Rover\CC1000_routines.asm
                                           ;************************************************************                    C:\Embedded\Rover\CC1000_routines.asm
                                           			list	p=16f876A	; "A" for test with ICE2000                                    C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           #include	<p16f876.inc>                                                           C:\Embedded\Rover\CC1000_routines.asm
                                                   LIST                                                                     C:\Program Files\MPLAB IDE\MCHIP_Tools\p16f876.inc
                                           ; P16F876.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.  C:\Program Files\MPLAB IDE\MCHIP_Tools\p16f876.inc
                                                   LIST                                                                     C:\Program Files\MPLAB IDE\MCHIP_Tools\p16f876.inc
                                           #include 	<CC1000.h>                                                             C:\Embedded\Rover\CC1000_routines.asm
                                           ;/* Constants defined for CC1000 */                                              C:\Embedded\Rover\CC1000.h
                                                                                                                            C:\Embedded\Rover\CC1000.h
                                           ;/* Register addresses */                                                        C:\Embedded\Rover\CC1000.h
                                                                                                                            C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MAIN            0x00                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_2A         0x01                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_1A         0x02                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_0A         0x03                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_2B         0x04                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_1B         0x05                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FREQ_0B         0x06                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSEP1           0x07                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSEP0           0x08                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_CURRENT         0x09                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FRONT_END       0x0A                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_PA_POW          0x0B                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_PLL             0x0C                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_LOCK            0x0D                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_CAL             0x0E                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MODEM2          0x0F                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MODEM1          0x10                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MODEM0          0x11                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_MATCH           0x12                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSCTRL          0x13                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE7         0x14                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE6         0x15                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE5         0x16                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE4         0x17                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE3         0x18                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE2         0x19                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSHAPE1         0x1A                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_FSDELAY         0x1B                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_PRESCALER       0x1C                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST6           0x40                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST5           0x41                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST4           0x42                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST3           0x43                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST2           0x44                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST1           0x45                                              C:\Embedded\Rover\CC1000.h
                                           #define CC1000_TEST0           0x46                                              C:\Embedded\Rover\CC1000.h
                                                                                                                            C:\Embedded\Rover\CC1000.h
                                           #include 	<rover.h>                                                              C:\Embedded\Rover\CC1000_routines.asm
                                           ;Pin usage definitions for the rover Master/Tranmitter                           C:\Embedded\Rover\rover.h
                                           ;CC1000 and PIC16f76                                                             C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;===========================================================                     C:\Embedded\Rover\rover.h
                                           ;CHANGE THESE DEFINITIONS WHEN COMPILING THE ASM CODE OR THE                     C:\Embedded\Rover\rover.h
                                           ;LIBRARY FOR MASTER OR FOR SLAVE                                                 C:\Embedded\Rover\rover.h
                                           #define		TX_MASTER                                                               C:\Embedded\Rover\rover.h
                                           ;#define		RX_SLAVE                                                               C:\Embedded\Rover\rover.h
                                           ;===========================================================                     C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           	ifdef	TX_MASTER                                                                 C:\Embedded\Rover\rover.h
                                           #define PCLK			PORTC,1	;                                                         C:\Embedded\Rover\rover.h
                                           #define PALE			PORTC,2	;                                                         C:\Embedded\Rover\rover.h
                                           	else                                                                            C:\Embedded\Rover\rover.h
                                           #define PCLK			PORTA,2	;                                                         C:\Embedded\Rover\rover.h
                                           #define PALE			PORTA,1	;                                                         C:\Embedded\Rover\rover.h
                                           	endif                                                                           C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           #define PDATA			PORTC,0	; Register interfaces                                    C:\Embedded\Rover\rover.h
                                           #define DIO 			PORTC,3	; Data interfaces                                         C:\Embedded\Rover\rover.h
                                           #define DCLK			PORTB,0 ;                                                         C:\Embedded\Rover\rover.h
                                           #define CHP_OUT			PORTC,5 ;not used                                              C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           #define PDATA_DIR		TRISC,0                                                       C:\Embedded\Rover\rover.h
                                           #define DIO_DIR			TRISC,3                                                        C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           #define SW1				PORTB,1	;Switches on Trasnmitter side                             C:\Embedded\Rover\rover.h
                                           #define SW2				PORTB,2	;                                                         C:\Embedded\Rover\rover.h
                                           #define SW3				PORTB,3	;                                                         C:\Embedded\Rover\rover.h
                                           #define	STEERING		PORTC,1	;                                                      C:\Embedded\Rover\rover.h
                                           #define	SPIN_DIR		PORTC,7	;                                                      C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           #define LED1			PORTC,4	;(IN5)LEDs on Receiver side corresponding to the          C:\Embedded\Rover\rover.h
                                           #define LED2			PORTB,2	;(IN6) swithces above                                     C:\Embedded\Rover\rover.h
                                           #define LED3			PORTB,1	;(IN7)                                                    C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;ERRORS AND OTHER EVENTS                                                         C:\Embedded\Rover\rover.h
                                           #define BUTTON_PRESSED	G_Events,0                                                C:\Embedded\Rover\rover.h
                                           #define REPLY_SENT		G_Events,1                                                   C:\Embedded\Rover\rover.h
                                           #define	NEW_COUNT		G_Events,2                                                    C:\Embedded\Rover\rover.h
                                           #define TIME_0_OUT		G_Events,3                                                   C:\Embedded\Rover\rover.h
                                           #define BYTE_FULL		G_Events,4                                                    C:\Embedded\Rover\rover.h
                                           #define RESET_CNTRS		G_Events,5                                                  C:\Embedded\Rover\rover.h
                                           #define CALIBRATION_OK	G_Events,6                                                C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;STATES                                                                          C:\Embedded\Rover\rover.h
                                           #define IDLE_MODE		G_State,0                                                     C:\Embedded\Rover\rover.h
                                           #define MASTER			G_State,1                                                       C:\Embedded\Rover\rover.h
                                           #define SLAVE			G_State,2                                                        C:\Embedded\Rover\rover.h
                                           #define RXCVER			G_State,3                                                       C:\Embedded\Rover\rover.h
                                           #define TXMTER			G_State,4                                                       C:\Embedded\Rover\rover.h
                                           #define	QUIET			G_State,5                                                        C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;PROTOCOL                                                                        C:\Embedded\Rover\rover.h
                                           ;PROTOCOL PARTS                                                                  C:\Embedded\Rover\rover.h
                                           #define BOF_FOUND		G_Pr_status,0                                                 C:\Embedded\Rover\rover.h
                                           #define PREAM_FINISHED	G_Pr_status,1                                             C:\Embedded\Rover\rover.h
                                           #define UI_FINISHED		G_Pr_status,2                                               C:\Embedded\Rover\rover.h
                                           #define	ADDR_CMPLT		G_Pr_status,3                                                C:\Embedded\Rover\rover.h
                                           #define NBR_BYTES_RCVD	G_Pr_status,4                                             C:\Embedded\Rover\rover.h
                                           #define DATA_RECEIVED	G_Pr_status,5                                              C:\Embedded\Rover\rover.h
                                           #define SUMCHECK_DONE	G_Pr_status,6                                              C:\Embedded\Rover\rover.h
                                           #define CMMND_COMPLETE	G_Pr_status,7                                             C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;OFFSETS:                                                                        C:\Embedded\Rover\rover.h
                                           #define PREAMBLE		0x00                                                           C:\Embedded\Rover\rover.h
                                           #define UI				0x03                                                               C:\Embedded\Rover\rover.h
                                           #define ADDRESS			0x05                                                           C:\Embedded\Rover\rover.h
                                           #define NO_BYTES		0x07                                                           C:\Embedded\Rover\rover.h
                                           #define DATA_OFFS		0x08                                                          C:\Embedded\Rover\rover.h
                                           #define SUM_CHECK		0x0F                                                          C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           #define	UI_CODE1		0xCD	;unique ramdom number                                     C:\Embedded\Rover\rover.h
                                           #define	UI_CODE2		0x4D	;                                                         C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;NUMBER OF BYTES                                                                 C:\Embedded\Rover\rover.h
                                           #define PREA_SIZE		3                                                             C:\Embedded\Rover\rover.h
                                           #define UI_SIZE			2                                                              C:\Embedded\Rover\rover.h
                                           #define ADD_SIZE		2                                                              C:\Embedded\Rover\rover.h
                                           #define NBR_SIZE		1                                                              C:\Embedded\Rover\rover.h
                                           #define DATA_SIZE		7                                                             C:\Embedded\Rover\rover.h
                                           #define CS_SIZE			1                                                              C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           TOT_FRAME_SIZ			equ	PREA_SIZE+UI_SIZE+ADD_SIZE+NBR_SIZE+DATA_SIZE+CS_SIZE        C:\Embedded\Rover\rover.h
                                           FIXED_PART				equ	PREA_SIZE+UI_SIZE+ADD_SIZE+NBR_SIZE                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           #define	RX_CURRENT		0x44 ;0100xxxx=950uA, XXXX=?????                             C:\Embedded\Rover\rover.h
                                           #define RXPLL			0x60                                                             C:\Embedded\Rover\rover.h
                                           #define	TX_CURRENT		0x81 ;1000xxxx=1450uA                                        C:\Embedded\Rover\rover.h
                                           #define TXPLL			0x48                                                             C:\Embedded\Rover\rover.h
                                           #define PA_VALUE		0xFF                                                           C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           ;TIMER 1 TIMERS                                                                  C:\Embedded\Rover\rover.h
                                           ;;;#define	RXMIT_TIM1L		0x90	;at 9600bps: h'3590 = 13,712uS=14ms                 C:\Embedded\Rover\rover.h
                                           ;;;#define	RXMIT_TIM1H		0x35	; (104uS/b*8bit/byt*16byt/frame+250uS+xx+ switch RX-TX) C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           #define	RXMIT_TIM1L		0xf0	;20ms includes delays for the master switch RX -> TX   C:\Embedded\Rover\rover.h
                                           #define	RXMIT_TIM1H		0x55	;                                                      C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           ;LOCK TIMEOUTS (this is a 16 bit integer e.g. 01FF)                              C:\Embedded\Rover\rover.h
                                           #define	LOCK1			0xFF                                                             C:\Embedded\Rover\rover.h
                                           #define	LOCK2			0x01                                                             C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                           ;TOGGLES AND CONTROLS FOR LEDS                                                   C:\Embedded\Rover\rover.h
                                           ;#define TOGGLE_G		L_GREEN_CTL,7                                                 C:\Embedded\Rover\rover.h
                                           ;#define	GREEN_FLAG		L_GREEN_CTL,6                                               C:\Embedded\Rover\rover.h
                                           ;#define	SPEED_G			L_GREEN_CTL,5                                                 C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;#define TOGGLE_R		L_RED_CTL,7                                                   C:\Embedded\Rover\rover.h
                                           ;#define	RED_FLAG		L_RED_CTL,6                                                   C:\Embedded\Rover\rover.h
                                           ;#define	SPEED_R			L_RED_CTL,5                                                   C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;#define	SLOW_ON			b'11000110'		;1xx..=start on, x1x..=on, xx000110=6 beats      C:\Embedded\Rover\rover.h
                                           ;#define	SLOW_OFF		b'01000110'		;0xx..=start off, x1x..=on, xx000110=6 beats     C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;#define	FAST_ON			b'11000010'                                                   C:\Embedded\Rover\rover.h
                                           ;#define	FAST_OFF		b'01000010'                                                   C:\Embedded\Rover\rover.h
                                           ;                                                                                C:\Embedded\Rover\rover.h
                                           ;#define VERYSLOW		b'11010000'                                                   C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\rover.h
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           ;MISCELLANEOUS DEFINITIONS	                                                      C:\Embedded\Rover\CC1000_routines.asm
                                           #define F_Carry	STATUS,0	;Most Significant Bit gets rotated through carry flag   C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           ;Library support:                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;================                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           	extern	DelaymS,Delay100uS,DelayuS,GET_NEXT_REGISTER,TREAT_ERROR                 C:\Embedded\Rover\CC1000_routines.asm
                                           	extern	CC1Kregs                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           	                                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           	                                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;MACROS                                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           ;======                                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           @PDATAOUT	MACRO                                                                  C:\Embedded\Rover\CC1000_routines.asm
000147   1683     BSF       0x3,0x5        			BSF		STATUS,RP0			;bank 1                                                     C:\Embedded\Rover\CC1000_routines.asm
000148   1007     BCF       0x7,0x0        			BCF		PDATA_DIR			;output                                                      C:\Embedded\Rover\CC1000_routines.asm
000149   1283     BCF       0x3,0x5        			BCF		STATUS,RP0			;return to bank0                                            C:\Embedded\Rover\CC1000_routines.asm
                                           			ENDM                                                                          C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           @PDATAIN	MACRO                                                                   C:\Embedded\Rover\CC1000_routines.asm
000138   1683     BSF       0x3,0x5        			BSF		STATUS,RP0			;bank 1                                                     C:\Embedded\Rover\CC1000_routines.asm
000139   1407     BSF       0x7,0x0        			BSF		PDATA_DIR			;input                                                       C:\Embedded\Rover\CC1000_routines.asm
00013a   1283     BCF       0x3,0x5        			BCF		STATUS,RP0			;return to bank0                                            C:\Embedded\Rover\CC1000_routines.asm
                                           			ENDM                                                                          C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           @DIOOUT		MACRO	                                                                  C:\Embedded\Rover\CC1000_routines.asm
000226   1683     BSF       0x3,0x5        			BSF		STATUS,RP0			;bank 1                                                     C:\Embedded\Rover\CC1000_routines.asm
000227   1301     BCF       0x1,0x6        			BCF		OPTION_REG,6		;Interrupt on RB0 falling edge                             C:\Embedded\Rover\CC1000_routines.asm
000228   1187     BCF       0x7,0x3        			BCF		DIO_DIR				;output                                                       C:\Embedded\Rover\CC1000_routines.asm
000229   1283     BCF       0x3,0x5        			BCF		STATUS,RP0			;return to bank0                                            C:\Embedded\Rover\CC1000_routines.asm
                                           			ENDM                                                                          C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           @DIOIN		MACRO                                                                    C:\Embedded\Rover\CC1000_routines.asm
0001a6   1683     BSF       0x3,0x5        			BSF		STATUS,RP0			;bank 1                                                     C:\Embedded\Rover\CC1000_routines.asm
0001f4   1683     BSF       0x3,0x5                                                                                         
0001a7   1701     BSF       0x1,0x6        			BSF		OPTION_REG,6		;Interrupt on RB0 rising edge                              C:\Embedded\Rover\CC1000_routines.asm
0001f5   1701     BSF       0x1,0x6                                                                                         
0001a8   1587     BSF       0x7,0x3        			BSF		DIO_DIR				;input                                                        C:\Embedded\Rover\CC1000_routines.asm
0001f6   1587     BSF       0x7,0x3                                                                                         
0001a9   1283     BCF       0x3,0x5        			BCF		STATUS,RP0			;return to bank0                                            C:\Embedded\Rover\CC1000_routines.asm
0001f7   1283     BCF       0x3,0x5                                                                                         
                                           			ENDM                                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           	                                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           	UDATA                                                                           C:\Embedded\Rover\CC1000_routines.asm
                                           ;GLOBAL DATA                                                                     C:\Embedded\Rover\CC1000_routines.asm
                                           G_CC_Reg	res	1                                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           G_CC_Data	res	1                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           ;LOCAL DATA	                                                                     C:\Embedded\Rover\CC1000_routines.asm
                                           L_BITCOU_W	res	1	;bit counter for writing to CC100 regs                          C:\Embedded\Rover\CC1000_routines.asm
                                           L_BITCOU_R	res	1	;bit counter for reading from CC1000 regs                       C:\Embedded\Rover\CC1000_routines.asm
                                           L_BITCOU_S	res	1	;bit counter for sending addr to CC1000 regs                    C:\Embedded\Rover\CC1000_routines.asm
                                           L_TEMPADD	res	1	;                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           L_TEMPDATA	res	1	;                                                               C:\Embedded\Rover\CC1000_routines.asm
                                           L_SUP_REG	res	1	;register counter in setupall                                    C:\Embedded\Rover\CC1000_routines.asm
                                           L_RX_CUR	res	1	;RX current                                                       C:\Embedded\Rover\CC1000_routines.asm
                                           L_TX_CUR	res	1	;TX current                                                       C:\Embedded\Rover\CC1000_routines.asm
                                           ;                                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           L_TIMEOUT1	res	1	;                                                               C:\Embedded\Rover\CC1000_routines.asm
                                           L_TIMEOUT2	res	1	;                                                               C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           ;EXTERNAL OR GLOBAL SYMBOLS                                                      C:\Embedded\Rover\CC1000_routines.asm
                                           ;============================                                                    C:\Embedded\Rover\CC1000_routines.asm
                                           	global G_CC_Reg,G_CC_Data                                                       C:\Embedded\Rover\CC1000_routines.asm
                                           	extern	G_Events,G_Pr_status                                                     C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           		CODE	                                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure:	WriteToCC1000register                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Write data to CC1000                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	Address to write to loaded in Addr                                      C:\Embedded\Rover\CC1000_routines.asm
                                           ;			Value loaded in Data_Unit (does not destroy it)                              C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing?                                                               C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           WriteToCC1000register                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           			global WriteToCC1000register                                                  C:\Embedded\Rover\CC1000_routines.asm
00010b   0856     MOVF      0x56,0x0       			MOVF	G_CC_Data,W		;                                                           C:\Embedded\Rover\CC1000_routines.asm
00010c   00db     MOVWF     0x5b           			MOVWF	L_TEMPDATA		;                                                           C:\Embedded\Rover\CC1000_routines.asm
00010d   214e     CALL      0x14e          			CALL	Send_address_to_CC1000                                                   C:\Embedded\Rover\CC1000_routines.asm
00010e   1487     BSF       0x7,0x1        			BSF		PCLK			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
00010f   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
000110   1407     BSF       0x7,0x0        			BSF		PDATA			;WRITE command is bit(0) HIGH                                    C:\Embedded\Rover\CC1000_routines.asm
000111   0000     NOP                      			NOP                                                                           C:\Embedded\Rover\CC1000_routines.asm
000112   1087     BCF       0x7,0x1        			BCF		PCLK			;(A)                                                              C:\Embedded\Rover\CC1000_routines.asm
000113   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
000114   1487     BSF       0x7,0x1        			BSF		PCLK			;(B)                                                              C:\Embedded\Rover\CC1000_routines.asm
000115   0000     NOP                      			NOP						;Allow for Tha                                                       C:\Embedded\Rover\CC1000_routines.asm
000116   0000     NOP                      			NOP						;Allow for Tha                                                       C:\Embedded\Rover\CC1000_routines.asm
000117   1507     BSF       0x7,0x2        			BSF		PALE			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
000118   0000     NOP                      			NOP						;Allow for Tsa(2)??                                                  C:\Embedded\Rover\CC1000_routines.asm
000119   0000     NOP                      			NOP						;Allow for Tsa(2)??                                                  C:\Embedded\Rover\CC1000_routines.asm
00011a   0000     NOP                      			NOP						;Allow for Tsa(2)??                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
00011b   3008     MOVLW     0x8            			MOVLW	0x08			;Send databyte                                                   C:\Embedded\Rover\CC1000_routines.asm
00011c   00d7     MOVWF     0x57           			MOVWF	L_BITCOU_W		;BIT COUNTER                                                C:\Embedded\Rover\CC1000_routines.asm
00011d   1487     BSF       0x7,0x1        _WDATA_1	BSF		PCLK			;                                                           C:\Embedded\Rover\CC1000_routines.asm
00011e   0ddb     RLF       0x5b,0x1       			RLF		L_TEMPDATA,F	;                                                           C:\Embedded\Rover\CC1000_routines.asm
00011f   1c03     BTFSS     0x3,0x0        			BTFSS	F_Carry			;Carry flag?                                                  C:\Embedded\Rover\CC1000_routines.asm
000120   2923     GOTO      0x123          			GOTO	_WDATA_2		;                                                              C:\Embedded\Rover\CC1000_routines.asm
000121   1407     BSF       0x7,0x0        			BSF		PDATA			;                                                                C:\Embedded\Rover\CC1000_routines.asm
000122   2924     GOTO      0x124          			GOTO	$+2				;                                                                 C:\Embedded\Rover\CC1000_routines.asm
000123   1007     BCF       0x7,0x0        _WDATA_2	BCF		PDATA			;                                                          C:\Embedded\Rover\CC1000_routines.asm
000124   1087     BCF       0x7,0x1        			BCF		PCLK			;SEND DATA                                                        C:\Embedded\Rover\CC1000_routines.asm
000125   0bd7     DECFSZ    0x57,0x1       			DECFSZ	L_BITCOU_W,F	;                                                         C:\Embedded\Rover\CC1000_routines.asm
000126   291d     GOTO      0x11d          			GOTO	_WDATA_1		;Loop 8 bits                                                   C:\Embedded\Rover\CC1000_routines.asm
000127   1487     BSF       0x7,0x1        			BSF		PCLK			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
000128   1407     BSF       0x7,0x0        			BSF		PDATA			;                                                                C:\Embedded\Rover\CC1000_routines.asm
000129   1507     BSF       0x7,0x2        			BSF		PALE			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
00012a   0008     RETURN                   			RETURN					;                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure:	ReadFromCC1000register                                               C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Reads data from CC1000                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	Address to read from loaded in G_CC_Reg                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Read byte in G_CC_Data                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ReadFromCC1000register                                                           C:\Embedded\Rover\CC1000_routines.asm
                                           			global	ReadFromCC1000register                                                 C:\Embedded\Rover\CC1000_routines.asm
00012b   214e     CALL      0x14e          			CALL	Send_address_to_CC1000                                                   C:\Embedded\Rover\CC1000_routines.asm
00012c   1487     BSF       0x7,0x1        			BSF		PCLK			;(-A)                                                             C:\Embedded\Rover\CC1000_routines.asm
00012d   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
00012e   1007     BCF       0x7,0x0        			BCF		PDATA			;READ command is bit(0) LOW                                      C:\Embedded\Rover\CC1000_routines.asm
00012f   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
000130   1087     BCF       0x7,0x1        			BCF		PCLK			;(A)                                                              C:\Embedded\Rover\CC1000_routines.asm
000131   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
000132   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
000133   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
000134   1487     BSF       0x7,0x1        			BSF		PCLK			;(B)                                                              C:\Embedded\Rover\CC1000_routines.asm
000135   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
000136   1407     BSF       0x7,0x0        			BSF		PDATA			;(C)                                                             C:\Embedded\Rover\CC1000_routines.asm
000137   1507     BSF       0x7,0x2        			BSF		PALE			;(D)                                                              C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
                                           			@PDATAIN				;Data In                                                          C:\Embedded\Rover\CC1000_routines.asm
00013b   3008     MOVLW     0x8            			MOVLW	0x08			;                                                                C:\Embedded\Rover\CC1000_routines.asm
00013c   00d8     MOVWF     0x58           			MOVWF	L_BITCOU_R		;BIT COUNTER                                                C:\Embedded\Rover\CC1000_routines.asm
00013d   01d6     CLRF      0x56           			CLRF	G_CC_Data		;                                                             C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
00013e   1003     BCF       0x3,0x0        _RDATA_1	CLRC					;CLEAR CARRY FLAG                                              C:\Embedded\Rover\CC1000_routines.asm
00013f   0dd6     RLF       0x56,0x1       			RLF		G_CC_Data,F		;READ CYCLE                                                 C:\Embedded\Rover\CC1000_routines.asm
000140   1087     BCF       0x7,0x1        			BCF		PCLK			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
000141   1456     BSF       0x56,0x0       			BSF		G_CC_Data,0		;Transfer PDATA                                             C:\Embedded\Rover\CC1000_routines.asm
000142   1c07     BTFSS     0x7,0x0        			BTFSS	PDATA			;                                                               C:\Embedded\Rover\CC1000_routines.asm
000143   1056     BCF       0x56,0x0       			BCF		G_CC_Data,0		;                                                           C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
000144   1487     BSF       0x7,0x1        			BSF		PCLK			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
000145   0bd8     DECFSZ    0x58,0x1       			DECFSZ	L_BITCOU_R,F	;                                                         C:\Embedded\Rover\CC1000_routines.asm
000146   293e     GOTO      0x13e          			GOTO	_RDATA_1		;Loop 8 bits                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           									;read finished                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           			@PDATAOUT				;leave it as Output, high impedance                              C:\Embedded\Rover\CC1000_routines.asm
00014a   1487     BSF       0x7,0x1        			BSF		PCLK			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
00014b   1407     BSF       0x7,0x0        			BSF		PDATA			;                                                                C:\Embedded\Rover\CC1000_routines.asm
00014c   1507     BSF       0x7,0x2        			BSF		PALE			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
00014d   0008     RETURN                   			RETURN					;                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure:	Send_address_to_CC1000                                               C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Sends the address to CC1000 for either read or write operation        C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	Address  loaded in G_CC_Reg                                             C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing - does not destroy contents of G_CC_Reg                        C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           Send_address_to_CC1000                                                           C:\Embedded\Rover\CC1000_routines.asm
00014e   1507     BSF       0x7,0x2        			BSF		PALE			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
00014f   0855     MOVF      0x55,0x0       			MOVF	G_CC_Reg,W		;                                                            C:\Embedded\Rover\CC1000_routines.asm
000150   00da     MOVWF     0x5a           			MOVWF	L_TEMPADD		;                                                            C:\Embedded\Rover\CC1000_routines.asm
000151   1107     BCF       0x7,0x2        			BCF		PALE			;                                                                 C:\Embedded\Rover\CC1000_routines.asm
000152   0dda     RLF       0x5a,0x1       			RLF		L_TEMPADD,F		;Allows for Tsa(1)                                          C:\Embedded\Rover\CC1000_routines.asm
000153   3007     MOVLW     0x7            			MOVLW	7				;7 MSBs                                                            C:\Embedded\Rover\CC1000_routines.asm
000154   00d9     MOVWF     0x59           			MOVWF	L_BITCOU_S		;BIT COUNTER                                                C:\Embedded\Rover\CC1000_routines.asm
000155   1487     BSF       0x7,0x1        _ADDR_0		BSF		PCLK			;SEND ADDRESS                                               C:\Embedded\Rover\CC1000_routines.asm
000156   0dda     RLF       0x5a,0x1       			RLF		L_TEMPADD,F		;                                                           C:\Embedded\Rover\CC1000_routines.asm
000157   1c03     BTFSS     0x3,0x0        			BTFSS	F_Carry			;Carry flag?                                                  C:\Embedded\Rover\CC1000_routines.asm
000158   295b     GOTO      0x15b          			GOTO	_ADDR_1			;                                                              C:\Embedded\Rover\CC1000_routines.asm
000159   1407     BSF       0x7,0x0        			BSF		PDATA			;                                                                C:\Embedded\Rover\CC1000_routines.asm
00015a   295c     GOTO      0x15c          			GOTO	$+2				;                                                                 C:\Embedded\Rover\CC1000_routines.asm
00015b   1007     BCF       0x7,0x0        _ADDR_1		BCF		PDATA			;                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
00015c   0000     NOP                      			NOP						;                                                                    C:\Embedded\Rover\CC1000_routines.asm
00015d   1087     BCF       0x7,0x1        			BCF		PCLK			;trigger pdata on negative edge of PCLK                           C:\Embedded\Rover\CC1000_routines.asm
00015e   0bd9     DECFSZ    0x59,0x1       			DECFSZ	L_BITCOU_S,F	;                                                         C:\Embedded\Rover\CC1000_routines.asm
00015f   2955     GOTO      0x155          			GOTO	_ADDR_0			;Loop 7 bits                                                   C:\Embedded\Rover\CC1000_routines.asm
000160   0008     RETURN                   			RETURN					;                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure:	Setup_CC1000PD                                                       C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Power down CC1000                                                     C:\Embedded\Rover\CC1000_routines.asm
                                           ;		Use WakeUpCC1000RX/TX followed by SetupCC1000RX/TX to wake from power down    C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	None                                                                    C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           Setup_CC1000PD                                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           			global	Setup_CC1000PD;                                                        C:\Embedded\Rover\CC1000_routines.asm
000161   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN		;                                                          C:\Embedded\Rover\CC1000_routines.asm
000162   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg		;                                                             C:\Embedded\Rover\CC1000_routines.asm
000163   303f     MOVLW     0x3f           			MOVLW	0x3F			;                                                                C:\Embedded\Rover\CC1000_routines.asm
000164   00d6     MOVWF     0x56           			MOVWF	G_CC_Data		;                                                            C:\Embedded\Rover\CC1000_routines.asm
000165   210b     CALL      0x10b          			CALL	WriteToCC1000register;Setup CC1000                                       C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
000166   300b     MOVLW     0xb            			MOVLW	CC1000_PA_POW	;Clear PA_POW settings                                    C:\Embedded\Rover\CC1000_routines.asm
000167   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg		;                                                             C:\Embedded\Rover\CC1000_routines.asm
000168   01d6     CLRF      0x56           			CLRF	G_CC_Data		;Turn off PA_POW                                              C:\Embedded\Rover\CC1000_routines.asm
000169   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
00016a   0008     RETURN                   			RETURN					;                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure:	Reset_CC1000                                                         C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Reset CC1000                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	None                                                                    C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           Reset_CC1000                                                                     C:\Embedded\Rover\CC1000_routines.asm
                                           			global	Reset_CC1000	;                                                         C:\Embedded\Rover\CC1000_routines.asm
00016b   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN		;                                                          C:\Embedded\Rover\CC1000_routines.asm
00016c   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg		;                                                             C:\Embedded\Rover\CC1000_routines.asm
00016d   212b     CALL      0x12b          			CALL	ReadFromCC1000register;Save current settings from MAIN                   C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
00016e   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN		;                                                          C:\Embedded\Rover\CC1000_routines.asm
00016f   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg		;                                                             C:\Embedded\Rover\CC1000_routines.asm
000170   30fe     MOVLW     0xfe           			MOVLW	b'11111110'		;xx111110 - (1s pwr dwn everything,0 resets regs)(A)       C:\Embedded\Rover\CC1000_routines.asm
000171   05d6     ANDWF     0x56,0x1       			ANDWF	G_CC_Data,F		;Reset CC1000                                              C:\Embedded\Rover\CC1000_routines.asm
000172   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
000173   3001     MOVLW     0x1            			MOVLW	1				;                                                                  C:\Embedded\Rover\CC1000_routines.asm
000174   04d6     IORWF     0x56,0x1       			IORWF	G_CC_Data,F		;Restore MAIN and bring CC1000 out of Reset                C:\Embedded\Rover\CC1000_routines.asm
000175   210b     CALL      0x10b          			CALL	WriteToCC1000register; (Fig 16, pg 26 --> (B))                           C:\Embedded\Rover\CC1000_routines.asm
000176   3002     MOVLW     0x2            			MOVLW	2				;Delay 2 Ms  (C)                                                   C:\Embedded\Rover\CC1000_routines.asm
000177   2257     CALL      0x257          			CALL	DelaymS			;                                                              C:\Embedded\Rover\CC1000_routines.asm
000178   0008     RETURN                   			RETURN					;                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure:	Setup_CC1000All                                                      C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Loops through the values of the 28 register of the CC1000, values are C:\Embedded\Rover\CC1000_routines.asm
                                           ;           passed in W                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	(W)-> CC1000 registers                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           Setup_CC1000All                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           			global 	Setup_CC1000All                                                       C:\Embedded\Rover\CC1000_routines.asm
000179   01dc     CLRF      0x5c           			CLRF	L_SUP_REG		;(Fig 16, pg 26 --> (C))                                      C:\Embedded\Rover\CC1000_routines.asm
00017a   0adc     INCF      0x5c,0x1       _SETUP		INCF	L_SUP_REG,F		;                                                      C:\Embedded\Rover\CC1000_routines.asm
00017b   3000     MOVLW     0x0            			MOVLW	HIGH GET_NEXT_REGISTER	;                                                C:\Embedded\Rover\CC1000_routines.asm
00017c   008a     MOVWF     0xa            			MOVWF	PCLATH			;                                                              C:\Embedded\Rover\CC1000_routines.asm
00017d   085c     MOVF      0x5c,0x0       			MOVF	L_SUP_REG,W		;                                                           C:\Embedded\Rover\CC1000_routines.asm
00017e   2005     CALL      0x5            			CALL	GET_NEXT_REGISTER;                                                       C:\Embedded\Rover\CC1000_routines.asm
                                           									;                                                                       C:\Embedded\Rover\CC1000_routines.asm
00017f   00d6     MOVWF     0x56           			MOVWF	G_CC_Data		;                                                            C:\Embedded\Rover\CC1000_routines.asm
000180   085c     MOVF      0x5c,0x0       			MOVF	L_SUP_REG,W		;                                                           C:\Embedded\Rover\CC1000_routines.asm
000181   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg		;                                                             C:\Embedded\Rover\CC1000_routines.asm
000182   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
000183   301c     MOVLW     0x1c           			MOVLW	d'28'			;                                                               C:\Embedded\Rover\CC1000_routines.asm
000184   025c     SUBWF     0x5c,0x0       			SUBWF	L_SUP_REG,W		;			                                                       C:\Embedded\Rover\CC1000_routines.asm
000185   1d03     BTFSS     0x3,0x2        			BTFSS	STATUS,Z		;zero flag set when 0 (EQ)                                    C:\Embedded\Rover\CC1000_routines.asm
000186   297a     GOTO      0x17a          			GOTO	_SETUP			;                                                               C:\Embedded\Rover\CC1000_routines.asm
000187   0008     RETURN                   			RETURN					;                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure: WakeUpCC1000toRx                                                     C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Turn on CC1000 from power down to Rx                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	W = RX_CURRENT                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           WakeUpCC1000toRx                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           			global 	WakeUpCC1000toRx                                                      C:\Embedded\Rover\CC1000_routines.asm
000188   00dd     MOVWF     0x5d           			MOVWF	L_RX_CUR			;save                                                        C:\Embedded\Rover\CC1000_routines.asm
000189   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN			;Start CC1000 as receiver:                                C:\Embedded\Rover\CC1000_routines.asm
00018a   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
00018b   303b     MOVLW     0x3b           			MOVLW	b'00111011'			;<7>:rx,<6>:reg A,<2>:Power up xtal osc core              C:\Embedded\Rover\CC1000_routines.asm
00018c   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
00018d   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
00018e   3009     MOVLW     0x9            			MOVLW	CC1000_CURRENT		;                                                       C:\Embedded\Rover\CC1000_routines.asm
00018f   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000190   085d     MOVF      0x5d,0x0       			MOVF	L_RX_CUR,W			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000191   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000192   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000193   300c     MOVLW     0xc            			MOVLW	CC1000_PLL			;                                                          C:\Embedded\Rover\CC1000_routines.asm
000194   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000195   3060     MOVLW     0x60           			MOVLW	RXPLL				;                                                              C:\Embedded\Rover\CC1000_routines.asm
000196   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000197   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000198   3005     MOVLW     0x5            			MOVLW	5					;Delay 5 Ms                                                       C:\Embedded\Rover\CC1000_routines.asm
000199   2257     CALL      0x257          			CALL	DelaymS				;                                                             C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
00019a   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN			;Start CC1000 as receiver:                                C:\Embedded\Rover\CC1000_routines.asm
00019b   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
00019c   3039     MOVLW     0x39           			MOVLW	b'00111001'			;Power up bias generator                                  C:\Embedded\Rover\CC1000_routines.asm
00019d   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
00019e   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
00019f   30fa     MOVLW     0xfa           			MOVLW	d'250'				;                                                             C:\Embedded\Rover\CC1000_routines.asm
0001a0   2263     CALL      0x263          			CALL	DelayuS				;                                                             C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001a1   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN			;                                                         C:\Embedded\Rover\CC1000_routines.asm
0001a2   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001a3   3031     MOVLW     0x31           			MOVLW	b'00110001'			;Power up frequency synthesiser                           C:\Embedded\Rover\CC1000_routines.asm
0001a4   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001a5   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
                                           			@DIOIN						;                                                                 C:\Embedded\Rover\CC1000_routines.asm
0001aa   0008     RETURN                   			RETURN						;                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure: WakeUpCC1000toTx                                                     C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Turn on CC1000 from power down to Tx                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	W = TX_CURRENT                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           WakeUpCC1000toTx                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           			global 	WakeUpCC1000toTx                                                      C:\Embedded\Rover\CC1000_routines.asm
0001ab   00de     MOVWF     0x5e           			MOVWF	L_TX_CUR			;save                                                        C:\Embedded\Rover\CC1000_routines.asm
0001ac   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN			;Start CC1000 as receiver:                                C:\Embedded\Rover\CC1000_routines.asm
0001ad   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001ae   30fb     MOVLW     0xfb           			MOVLW	b'11111011'			;<7>:rx,<6>:reg A,<2>:Power up xtal osc core              C:\Embedded\Rover\CC1000_routines.asm
0001af   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001b0   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001b1   3009     MOVLW     0x9            			MOVLW	CC1000_CURRENT		;                                                       C:\Embedded\Rover\CC1000_routines.asm
0001b2   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001b3   085e     MOVF      0x5e,0x0       			MOVF	L_TX_CUR,W			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001b4   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001b5   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001b6   300c     MOVLW     0xc            			MOVLW	CC1000_PLL			;                                                          C:\Embedded\Rover\CC1000_routines.asm
0001b7   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001b8   3048     MOVLW     0x48           			MOVLW	TXPLL				;                                                              C:\Embedded\Rover\CC1000_routines.asm
0001b9   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001ba   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001bb   3005     MOVLW     0x5            			MOVLW	d'5'				;                                                               C:\Embedded\Rover\CC1000_routines.asm
0001bc   2257     CALL      0x257          			CALL	DelaymS				;                                                             C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001bd   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN			;                                                         C:\Embedded\Rover\CC1000_routines.asm
0001be   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001bf   30f9     MOVLW     0xf9           			MOVLW	b'11111001'			;Turn on bias generator                                   C:\Embedded\Rover\CC1000_routines.asm
0001c0   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001c1   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001c2   30fa     MOVLW     0xfa           			MOVLW	d'250'				;                                                             C:\Embedded\Rover\CC1000_routines.asm
0001c3   2263     CALL      0x263          			CALL	DelayuS				;                                                             C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001c4   300b     MOVLW     0xb            			MOVLW	CC1000_PA_POW		;Restore PA_POW settings                                 C:\Embedded\Rover\CC1000_routines.asm
0001c5   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001c6   30ff     MOVLW     0xff           			MOVLW	PA_VALUE			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001c7   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001c8   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001c9   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN			;                                                         C:\Embedded\Rover\CC1000_routines.asm
0001ca   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001cb   30f1     MOVLW     0xf1           			MOVLW	b'11110001'			;Turn on freq synthesiser                                 C:\Embedded\Rover\CC1000_routines.asm
0001cc   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001cd   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
0001ce   0008     RETURN                   			RETURN						;                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure: SetupCC1000Rx                                                        C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Go to Rx mode Freq A                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	W = RX_CURRENT                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           SetupCC1000Rx                                                                    C:\Embedded\Rover\CC1000_routines.asm
                                           			global 	SetupCC1000Rx                                                         C:\Embedded\Rover\CC1000_routines.asm
0001cf   00dd     MOVWF     0x5d           			MOVWF	L_RX_CUR			;save                                                        C:\Embedded\Rover\CC1000_routines.asm
0001d0   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN			;Power up RX part                                         C:\Embedded\Rover\CC1000_routines.asm
0001d1   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001d2   3011     MOVLW     0x11           			MOVLW	b'00010001'			;<7>:rx,<6>:reg A,                                        C:\Embedded\Rover\CC1000_routines.asm
0001d3   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;  <5,4>:Power down TX                                      C:\Embedded\Rover\CC1000_routines.asm
0001d4   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001d5   300c     MOVLW     0xc            			MOVLW	CC1000_PLL			;                                                          C:\Embedded\Rover\CC1000_routines.asm
0001d6   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001d7   3060     MOVLW     0x60           			MOVLW	RXPLL				;                                                              C:\Embedded\Rover\CC1000_routines.asm
0001d8   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001d9   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001da   3009     MOVLW     0x9            			MOVLW	CC1000_CURRENT		;                                                       C:\Embedded\Rover\CC1000_routines.asm
0001db   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001dc   085d     MOVF      0x5d,0x0       			MOVF	L_RX_CUR,W			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001dd   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001de   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001df   3002     MOVLW     0x2            			MOVLW	d'2'				;                                                               C:\Embedded\Rover\CC1000_routines.asm
0001e0   225d     CALL      0x25d          			CALL	Delay100uS			;                                                           C:\Embedded\Rover\CC1000_routines.asm
0001e1   3032     MOVLW     0x32           			MOVLW	d'50'				;                                                              C:\Embedded\Rover\CC1000_routines.asm
0001e2   2263     CALL      0x263          			CALL	DelayuS				;                                                             C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
0001e3   30ff     MOVLW     0xff           			MOVLW	LOCK1				;                                                              C:\Embedded\Rover\CC1000_routines.asm
0001e4   00df     MOVWF     0x5f           			MOVWF	L_TIMEOUT1			;                                                          C:\Embedded\Rover\CC1000_routines.asm
0001e5   3001     MOVLW     0x1            			MOVLW	LOCK2				;                                                              C:\Embedded\Rover\CC1000_routines.asm
0001e6   00e0     MOVWF     0x60           			MOVWF	L_TIMEOUT2			;                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001e7   300d     MOVLW     0xd            _WAIT_RX_LK	MOVLW	CC1000_LOCK			;                                                C:\Embedded\Rover\CC1000_routines.asm
0001e8   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001e9   212b     CALL      0x12b          			CALL	ReadFromCC1000register;                                                  C:\Embedded\Rover\CC1000_routines.asm
0001ea   1856     BTFSC     0x56,0x0       			BTFSC	G_CC_Data,0			; Wait till PLL lock complete                             C:\Embedded\Rover\CC1000_routines.asm
0001eb   29f3     GOTO      0x1f3          			GOTO	_CONT_1R			;                                                             C:\Embedded\Rover\CC1000_routines.asm
0001ec   0bdf     DECFSZ    0x5f,0x1       			DECFSZ	L_TIMEOUT1,F		;                                                        C:\Embedded\Rover\CC1000_routines.asm
0001ed   29e7     GOTO      0x1e7          			GOTO	_WAIT_RX_LK			;                                                          C:\Embedded\Rover\CC1000_routines.asm
0001ee   0be0     DECFSZ    0x60,0x1       			DECFSZ	L_TIMEOUT2,F		;                                                        C:\Embedded\Rover\CC1000_routines.asm
0001ef   29e7     GOTO      0x1e7          			GOTO	_WAIT_RX_LK			;                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001f0   222b     CALL      0x22b          			CALL	CalibrateCC1000		;                                                       C:\Embedded\Rover\CC1000_routines.asm
0001f1   1f4b     BTFSS     0x4b,0x6       			BTFSS	CALIBRATION_OK		;PLL not in lock, re-calibrate                          C:\Embedded\Rover\CC1000_routines.asm
0001f2   20a7     CALL      0xa7           			CALL	TREAT_ERROR			;                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
0001f3   0000     NOP                      _CONT_1R	NOP							;                                                             C:\Embedded\Rover\CC1000_routines.asm
                                           			@DIOIN						;                                                                 C:\Embedded\Rover\CC1000_routines.asm
0001f8   0008     RETURN                   			RETURN						;                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure: SetupCC1000Tx                                                        C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	Go to Tx mode Freq B                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	(W)-> TX_CURRENT                                                        C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           SetupCC1000Tx                                                                    C:\Embedded\Rover\CC1000_routines.asm
                                           			global 	SetupCC1000Tx                                                         C:\Embedded\Rover\CC1000_routines.asm
0001f9   00de     MOVWF     0x5e           			MOVWF	L_TX_CUR			;save                                                        C:\Embedded\Rover\CC1000_routines.asm
0001fa   300b     MOVLW     0xb            			MOVLW	CC1000_PA_POW		;Turn off PA_POW settings                                C:\Embedded\Rover\CC1000_routines.asm
0001fb   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
0001fc   01d6     CLRF      0x56           			CLRF	G_CC_Data			;Turn off PA_POW to avoid spurs                              C:\Embedded\Rover\CC1000_routines.asm
0001fd   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
0001fe   3000     MOVLW     0x0            			MOVLW	CC1000_MAIN			;Power up TX part                                         C:\Embedded\Rover\CC1000_routines.asm
0001ff   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000200   30e1     MOVLW     0xe1           			MOVLW	b'11100001'			;<7>:tx,<6>:reg B,<5>:Power down RX                       C:\Embedded\Rover\CC1000_routines.asm
000201   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000202   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                                                                                                            C:\Embedded\Rover\CC1000_routines.asm
000203   300c     MOVLW     0xc            			MOVLW	CC1000_PLL			;                                                          C:\Embedded\Rover\CC1000_routines.asm
000204   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000205   3048     MOVLW     0x48           			MOVLW	TXPLL				;(0X48)                                                        C:\Embedded\Rover\CC1000_routines.asm
000206   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000207   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000208   3009     MOVLW     0x9            			MOVLW	CC1000_CURRENT		;                                                       C:\Embedded\Rover\CC1000_routines.asm
000209   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
00020a   085e     MOVF      0x5e,0x0       			MOVF	L_TX_CUR,W			;                                                           C:\Embedded\Rover\CC1000_routines.asm
00020b   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
00020c   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
00020d   3002     MOVLW     0x2            			MOVLW	d'2'				;                                                               C:\Embedded\Rover\CC1000_routines.asm
00020e   225d     CALL      0x25d          			CALL	Delay100uS			;                                                           C:\Embedded\Rover\CC1000_routines.asm
00020f   3032     MOVLW     0x32           			MOVLW	d'50'				;                                                              C:\Embedded\Rover\CC1000_routines.asm
000210   2263     CALL      0x263          			CALL	DelayuS				;                                                             C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000211   30ff     MOVLW     0xff           			MOVLW	LOCK1				;                                                              C:\Embedded\Rover\CC1000_routines.asm
000212   00df     MOVWF     0x5f           			MOVWF	L_TIMEOUT1			;                                                          C:\Embedded\Rover\CC1000_routines.asm
000213   3001     MOVLW     0x1            			MOVLW	LOCK2				;                                                              C:\Embedded\Rover\CC1000_routines.asm
000214   00e0     MOVWF     0x60           			MOVWF	L_TIMEOUT2			;                                                          C:\Embedded\Rover\CC1000_routines.asm
000215   300d     MOVLW     0xd            _WAIT_TX_LK	MOVLW	CC1000_LOCK			;                                                C:\Embedded\Rover\CC1000_routines.asm
000216   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000217   212b     CALL      0x12b          			CALL	ReadFromCC1000register;                                                  C:\Embedded\Rover\CC1000_routines.asm
000218   1856     BTFSC     0x56,0x0       			BTFSC	G_CC_Data,0			; Wait till PLL lock complete                             C:\Embedded\Rover\CC1000_routines.asm
000219   2a21     GOTO      0x221          			GOTO	_CONT_1T			;                                                             C:\Embedded\Rover\CC1000_routines.asm
00021a   0bdf     DECFSZ    0x5f,0x1       			DECFSZ	L_TIMEOUT1,F		;                                                        C:\Embedded\Rover\CC1000_routines.asm
00021b   2a15     GOTO      0x215          			GOTO	_WAIT_TX_LK			;                                                          C:\Embedded\Rover\CC1000_routines.asm
00021c   0be0     DECFSZ    0x60,0x1       			DECFSZ	L_TIMEOUT2,F		;                                                        C:\Embedded\Rover\CC1000_routines.asm
00021d   2a15     GOTO      0x215          			GOTO	_WAIT_TX_LK			;                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
00021e   222b     CALL      0x22b          			CALL	CalibrateCC1000		;                                                       C:\Embedded\Rover\CC1000_routines.asm
00021f   1f4b     BTFSS     0x4b,0x6       			BTFSS	CALIBRATION_OK		; PLL not in lock, recalibrate                          C:\Embedded\Rover\CC1000_routines.asm
000220   20a7     CALL      0xa7           			CALL	TREAT_ERROR			;                                                          C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000221   300b     MOVLW     0xb            _CONT_1T	MOVLW	CC1000_PA_POW		;Restore PA_POW settings                           C:\Embedded\Rover\CC1000_routines.asm
000222   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000223   30ff     MOVLW     0xff           			MOVLW	PA_VALUE			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000224   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000225   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
                                           			@DIOOUT						;                                                                C:\Embedded\Rover\CC1000_routines.asm
00022a   0008     RETURN                   			RETURN						;                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           ;Procedure: CalibrateCC1000                                                      C:\Embedded\Rover\CC1000_routines.asm
                                           ;  *** This is different than the single OR dual calibrations (Fig.14,15 page 23,24) C:\Embedded\Rover\CC1000_routines.asm
                                           ;  *** Should it be different for RX and TX - we are doing 2 calibrations...     C:\Embedded\Rover\CC1000_routines.asm
                                           ;Function:	                                                                      C:\Embedded\Rover\CC1000_routines.asm
                                           ;Inputs:	None                                                                    C:\Embedded\Rover\CC1000_routines.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           CalibrateCC1000                                                                  C:\Embedded\Rover\CC1000_routines.asm
                                           			global 	CalibrateCC1000                                                       C:\Embedded\Rover\CC1000_routines.asm
00022b   300b     MOVLW     0xb            			MOVLW	CC1000_PA_POW		;Clear PA_POW settings                                   C:\Embedded\Rover\CC1000_routines.asm
00022c   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
00022d   01d6     CLRF      0x56           			CLRF	G_CC_Data			;Turn off PA_POW to avoid spurs                              C:\Embedded\Rover\CC1000_routines.asm
00022e   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
00022f   300e     MOVLW     0xe            			MOVLW	CC1000_CAL			;Start calibration                                         C:\Embedded\Rover\CC1000_routines.asm
000230   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000231   30a6     MOVLW     0xa6           			MOVLW	b'10100110'			;&& WAS A5!!	                                             C:\Embedded\Rover\CC1000_routines.asm
000232   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000233   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000234   300e     MOVLW     0xe            			MOVLW	CC1000_CAL			;                                                          C:\Embedded\Rover\CC1000_routines.asm
000235   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000236   212b     CALL      0x12b          _WAIT_CAL	CALL	ReadFromCC1000register;                                           C:\Embedded\Rover\CC1000_routines.asm
000237   1dd6     BTFSS     0x56,0x3       			BTFSS	G_CC_Data,3			; Wait till calibration complete                          C:\Embedded\Rover\CC1000_routines.asm
000238   2a36     GOTO      0x236          			GOTO	_WAIT_CAL			;                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000239   30ff     MOVLW     0xff           			MOVLW	LOCK1				;                                                              C:\Embedded\Rover\CC1000_routines.asm
00023a   00df     MOVWF     0x5f           			MOVWF	L_TIMEOUT1			;                                                          C:\Embedded\Rover\CC1000_routines.asm
00023b   3001     MOVLW     0x1            			MOVLW	LOCK2				;                                                              C:\Embedded\Rover\CC1000_routines.asm
00023c   00e0     MOVWF     0x60           			MOVWF	L_TIMEOUT2			;                                                          C:\Embedded\Rover\CC1000_routines.asm
00023d   300d     MOVLW     0xd            _WAI_CAL_LK	MOVLW	CC1000_LOCK			;                                                C:\Embedded\Rover\CC1000_routines.asm
00023e   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
00023f   212b     CALL      0x12b          			CALL	ReadFromCC1000register;                                                  C:\Embedded\Rover\CC1000_routines.asm
000240   1856     BTFSC     0x56,0x0       			BTFSC	G_CC_Data,0			; Wait till PLL lock complete                             C:\Embedded\Rover\CC1000_routines.asm
000241   2a4b     GOTO      0x24b          			GOTO	_CONT_CAL			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000242   0bdf     DECFSZ    0x5f,0x1       			DECFSZ	L_TIMEOUT1,F		;                                                        C:\Embedded\Rover\CC1000_routines.asm
000243   2a3d     GOTO      0x23d          			GOTO	_WAI_CAL_LK			;                                                          C:\Embedded\Rover\CC1000_routines.asm
000244   0be0     DECFSZ    0x60,0x1       			DECFSZ	L_TIMEOUT2,F		;                                                        C:\Embedded\Rover\CC1000_routines.asm
000245   2a3d     GOTO      0x23d          			GOTO	_WAI_CAL_LK			;                                                          C:\Embedded\Rover\CC1000_routines.asm
000246   1856     BTFSC     0x56,0x0       			BTFSC	G_CC_Data,0			; Wait till PLL lock complete                             C:\Embedded\Rover\CC1000_routines.asm
000247   2a4b     GOTO      0x24b          			GOTO	_CONT_CAL			;                                                            C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000248   20a7     CALL      0xa7           			CALL	TREAT_ERROR			;Calibartion failed                                        C:\Embedded\Rover\CC1000_routines.asm
000249   134b     BCF       0x4b,0x6       			BCF		CALIBRATION_OK		;                                                        C:\Embedded\Rover\CC1000_routines.asm
00024a   2a4c     GOTO      0x24c          			GOTO	_CONT_CALE			;                                                           C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
00024b   174b     BSF       0x4b,0x6       _CONT_CAL	BSF		CALIBRATION_OK		;Indicate calibration successful                  C:\Embedded\Rover\CC1000_routines.asm
00024c   300e     MOVLW     0xe            _CONT_CALE	MOVLW	CC1000_CAL			;                                                  C:\Embedded\Rover\CC1000_routines.asm
00024d   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
00024e   3026     MOVLW     0x26           			MOVLW	b'00100110'			;End calibration                                          C:\Embedded\Rover\CC1000_routines.asm
00024f   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000250   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
                                           										;                                                                      C:\Embedded\Rover\CC1000_routines.asm
000251   300b     MOVLW     0xb            			MOVLW	CC1000_PA_POW		;Restore PA_POW settings                                 C:\Embedded\Rover\CC1000_routines.asm
000252   00d5     MOVWF     0x55           			MOVWF	G_CC_Reg			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000253   30ff     MOVLW     0xff           			MOVLW	PA_VALUE			;                                                            C:\Embedded\Rover\CC1000_routines.asm
000254   00d6     MOVWF     0x56           			MOVWF	G_CC_Data			;                                                           C:\Embedded\Rover\CC1000_routines.asm
000255   210b     CALL      0x10b          			CALL	WriteToCC1000register;                                                   C:\Embedded\Rover\CC1000_routines.asm
000256   0008     RETURN                   			RETURN						;                                                                 C:\Embedded\Rover\CC1000_routines.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\CC1000_routines.asm
                                           			END							; end of code                                                       C:\Embedded\Rover\CC1000_routines.asm
                                           	                                                                                C:\Embedded\Rover\CC1000_routines.asm
                                           ;************************************************************                    C:\Embedded\Rover\Timeserv.asm
                                           ;	TITLE:	Timing services for PIC17F876A                                          C:\Embedded\Rover\Timeserv.asm
                                           ;	FILENAME:  Timeserv.asm                                                        C:\Embedded\Rover\Timeserv.asm
                                           ;	REVISION HISTORY:  31-03-03 First try                                          C:\Embedded\Rover\Timeserv.asm
                                           ;	HARDWARE: BIT SRL. transciever                                                 C:\Embedded\Rover\Timeserv.asm
                                           ;	FREQUENCY: 4MHz                                                                C:\Embedded\Rover\Timeserv.asm
                                           ;	Function: Provides timing services to other modules                            C:\Embedded\Rover\Timeserv.asm
                                           ;************************************************************                    C:\Embedded\Rover\Timeserv.asm
                                           			list	p=16f876A	; "A" for tests with ICE2000                                   C:\Embedded\Rover\Timeserv.asm
                                                                                                                            C:\Embedded\Rover\Timeserv.asm
                                           #include	<p16f876.inc>                                                           C:\Embedded\Rover\Timeserv.asm
                                                   LIST                                                                     C:\PROGRA~1\MPLABI~1\MCHIP_Tools\p16f876.inc
                                           ; P16F876.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.  C:\PROGRA~1\MPLABI~1\MCHIP_Tools\p16f876.inc
                                                   LIST                                                                     C:\PROGRA~1\MPLABI~1\MCHIP_Tools\p16f876.inc
                                           #include 	<CC1000.h>                                                             C:\Embedded\Rover\Timeserv.asm
                                           ;/* Constants defined for CC1000 */                                              C:\EMBEDDED\ROVER\CC1000.h
                                                                                                                            C:\EMBEDDED\ROVER\CC1000.h
                                           ;/* Register addresses */                                                        C:\EMBEDDED\ROVER\CC1000.h
                                                                                                                            C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_MAIN            0x00                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FREQ_2A         0x01                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FREQ_1A         0x02                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FREQ_0A         0x03                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FREQ_2B         0x04                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FREQ_1B         0x05                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FREQ_0B         0x06                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSEP1           0x07                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSEP0           0x08                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_CURRENT         0x09                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FRONT_END       0x0A                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_PA_POW          0x0B                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_PLL             0x0C                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_LOCK            0x0D                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_CAL             0x0E                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_MODEM2          0x0F                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_MODEM1          0x10                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_MODEM0          0x11                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_MATCH           0x12                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSCTRL          0x13                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSHAPE7         0x14                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSHAPE6         0x15                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSHAPE5         0x16                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSHAPE4         0x17                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSHAPE3         0x18                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSHAPE2         0x19                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSHAPE1         0x1A                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_FSDELAY         0x1B                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_PRESCALER       0x1C                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_TEST6           0x40                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_TEST5           0x41                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_TEST4           0x42                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_TEST3           0x43                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_TEST2           0x44                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_TEST1           0x45                                              C:\EMBEDDED\ROVER\CC1000.h
                                           #define CC1000_TEST0           0x46                                              C:\EMBEDDED\ROVER\CC1000.h
                                                                                                                            C:\EMBEDDED\ROVER\CC1000.h
                                           #include 	<rover.h>                                                              C:\Embedded\Rover\Timeserv.asm
                                           ;Pin usage definitions for the rover Master/Tranmitter                           C:\EMBEDDED\ROVER\rover.h
                                           ;CC1000 and PIC16f76                                                             C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;===========================================================                     C:\EMBEDDED\ROVER\rover.h
                                           ;CHANGE THESE DEFINITIONS WHEN COMPILING THE ASM CODE OR THE                     C:\EMBEDDED\ROVER\rover.h
                                           ;LIBRARY FOR MASTER OR FOR SLAVE                                                 C:\EMBEDDED\ROVER\rover.h
                                           #define		TX_MASTER                                                               C:\EMBEDDED\ROVER\rover.h
                                           ;#define		RX_SLAVE                                                               C:\EMBEDDED\ROVER\rover.h
                                           ;===========================================================                     C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                           	ifdef	TX_MASTER                                                                 C:\EMBEDDED\ROVER\rover.h
                                           #define PCLK			PORTC,1	;                                                         C:\EMBEDDED\ROVER\rover.h
                                           #define PALE			PORTC,2	;                                                         C:\EMBEDDED\ROVER\rover.h
                                           	else                                                                            C:\EMBEDDED\ROVER\rover.h
                                           #define PCLK			PORTA,2	;                                                         C:\EMBEDDED\ROVER\rover.h
                                           #define PALE			PORTA,1	;                                                         C:\EMBEDDED\ROVER\rover.h
                                           	endif                                                                           C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                           #define PDATA			PORTC,0	; Register interfaces                                    C:\EMBEDDED\ROVER\rover.h
                                           #define DIO 			PORTC,3	; Data interfaces                                         C:\EMBEDDED\ROVER\rover.h
                                           #define DCLK			PORTB,0 ;                                                         C:\EMBEDDED\ROVER\rover.h
                                           #define CHP_OUT			PORTC,5 ;not used                                              C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           #define PDATA_DIR		TRISC,0                                                       C:\EMBEDDED\ROVER\rover.h
                                           #define DIO_DIR			TRISC,3                                                        C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           #define SW1				PORTB,1	;Switches on Trasnmitter side                             C:\EMBEDDED\ROVER\rover.h
                                           #define SW2				PORTB,2	;                                                         C:\EMBEDDED\ROVER\rover.h
                                           #define SW3				PORTB,3	;                                                         C:\EMBEDDED\ROVER\rover.h
                                           #define	STEERING		PORTC,1	;                                                      C:\EMBEDDED\ROVER\rover.h
                                           #define	SPIN_DIR		PORTC,7	;                                                      C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           #define LED1			PORTC,4	;(IN5)LEDs on Receiver side corresponding to the          C:\EMBEDDED\ROVER\rover.h
                                           #define LED2			PORTB,2	;(IN6) swithces above                                     C:\EMBEDDED\ROVER\rover.h
                                           #define LED3			PORTB,1	;(IN7)                                                    C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;ERRORS AND OTHER EVENTS                                                         C:\EMBEDDED\ROVER\rover.h
                                           #define BUTTON_PRESSED	G_Events,0                                                C:\EMBEDDED\ROVER\rover.h
                                           #define REPLY_SENT		G_Events,1                                                   C:\EMBEDDED\ROVER\rover.h
                                           #define	NEW_COUNT		G_Events,2                                                    C:\EMBEDDED\ROVER\rover.h
                                           #define TIME_0_OUT		G_Events,3                                                   C:\EMBEDDED\ROVER\rover.h
                                           #define BYTE_FULL		G_Events,4                                                    C:\EMBEDDED\ROVER\rover.h
                                           #define RESET_CNTRS		G_Events,5                                                  C:\EMBEDDED\ROVER\rover.h
                                           #define CALIBRATION_OK	G_Events,6                                                C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;STATES                                                                          C:\EMBEDDED\ROVER\rover.h
                                           #define IDLE_MODE		G_State,0                                                     C:\EMBEDDED\ROVER\rover.h
                                           #define MASTER			G_State,1                                                       C:\EMBEDDED\ROVER\rover.h
                                           #define SLAVE			G_State,2                                                        C:\EMBEDDED\ROVER\rover.h
                                           #define RXCVER			G_State,3                                                       C:\EMBEDDED\ROVER\rover.h
                                           #define TXMTER			G_State,4                                                       C:\EMBEDDED\ROVER\rover.h
                                           #define	QUIET			G_State,5                                                        C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;PROTOCOL                                                                        C:\EMBEDDED\ROVER\rover.h
                                           ;PROTOCOL PARTS                                                                  C:\EMBEDDED\ROVER\rover.h
                                           #define BOF_FOUND		G_Pr_status,0                                                 C:\EMBEDDED\ROVER\rover.h
                                           #define PREAM_FINISHED	G_Pr_status,1                                             C:\EMBEDDED\ROVER\rover.h
                                           #define UI_FINISHED		G_Pr_status,2                                               C:\EMBEDDED\ROVER\rover.h
                                           #define	ADDR_CMPLT		G_Pr_status,3                                                C:\EMBEDDED\ROVER\rover.h
                                           #define NBR_BYTES_RCVD	G_Pr_status,4                                             C:\EMBEDDED\ROVER\rover.h
                                           #define DATA_RECEIVED	G_Pr_status,5                                              C:\EMBEDDED\ROVER\rover.h
                                           #define SUMCHECK_DONE	G_Pr_status,6                                              C:\EMBEDDED\ROVER\rover.h
                                           #define CMMND_COMPLETE	G_Pr_status,7                                             C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;OFFSETS:                                                                        C:\EMBEDDED\ROVER\rover.h
                                           #define PREAMBLE		0x00                                                           C:\EMBEDDED\ROVER\rover.h
                                           #define UI				0x03                                                               C:\EMBEDDED\ROVER\rover.h
                                           #define ADDRESS			0x05                                                           C:\EMBEDDED\ROVER\rover.h
                                           #define NO_BYTES		0x07                                                           C:\EMBEDDED\ROVER\rover.h
                                           #define DATA_OFFS		0x08                                                          C:\EMBEDDED\ROVER\rover.h
                                           #define SUM_CHECK		0x0F                                                          C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           #define	UI_CODE1		0xCD	;unique ramdom number                                     C:\EMBEDDED\ROVER\rover.h
                                           #define	UI_CODE2		0x4D	;                                                         C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;NUMBER OF BYTES                                                                 C:\EMBEDDED\ROVER\rover.h
                                           #define PREA_SIZE		3                                                             C:\EMBEDDED\ROVER\rover.h
                                           #define UI_SIZE			2                                                              C:\EMBEDDED\ROVER\rover.h
                                           #define ADD_SIZE		2                                                              C:\EMBEDDED\ROVER\rover.h
                                           #define NBR_SIZE		1                                                              C:\EMBEDDED\ROVER\rover.h
                                           #define DATA_SIZE		7                                                             C:\EMBEDDED\ROVER\rover.h
                                           #define CS_SIZE			1                                                              C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                           TOT_FRAME_SIZ			equ	PREA_SIZE+UI_SIZE+ADD_SIZE+NBR_SIZE+DATA_SIZE+CS_SIZE        C:\EMBEDDED\ROVER\rover.h
                                           FIXED_PART				equ	PREA_SIZE+UI_SIZE+ADD_SIZE+NBR_SIZE                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                           #define	RX_CURRENT		0x44 ;0100xxxx=950uA, XXXX=?????                             C:\EMBEDDED\ROVER\rover.h
                                           #define RXPLL			0x60                                                             C:\EMBEDDED\ROVER\rover.h
                                           #define	TX_CURRENT		0x81 ;1000xxxx=1450uA                                        C:\EMBEDDED\ROVER\rover.h
                                           #define TXPLL			0x48                                                             C:\EMBEDDED\ROVER\rover.h
                                           #define PA_VALUE		0xFF                                                           C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                           ;TIMER 1 TIMERS                                                                  C:\EMBEDDED\ROVER\rover.h
                                           ;;;#define	RXMIT_TIM1L		0x90	;at 9600bps: h'3590 = 13,712uS=14ms                 C:\EMBEDDED\ROVER\rover.h
                                           ;;;#define	RXMIT_TIM1H		0x35	; (104uS/b*8bit/byt*16byt/frame+250uS+xx+ switch RX-TX) C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                           #define	RXMIT_TIM1L		0xf0	;20ms includes delays for the master switch RX -> TX   C:\EMBEDDED\ROVER\rover.h
                                           #define	RXMIT_TIM1H		0x55	;                                                      C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                           ;LOCK TIMEOUTS (this is a 16 bit integer e.g. 01FF)                              C:\EMBEDDED\ROVER\rover.h
                                           #define	LOCK1			0xFF                                                             C:\EMBEDDED\ROVER\rover.h
                                           #define	LOCK2			0x01                                                             C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                           ;TOGGLES AND CONTROLS FOR LEDS                                                   C:\EMBEDDED\ROVER\rover.h
                                           ;#define TOGGLE_G		L_GREEN_CTL,7                                                 C:\EMBEDDED\ROVER\rover.h
                                           ;#define	GREEN_FLAG		L_GREEN_CTL,6                                               C:\EMBEDDED\ROVER\rover.h
                                           ;#define	SPEED_G			L_GREEN_CTL,5                                                 C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;#define TOGGLE_R		L_RED_CTL,7                                                   C:\EMBEDDED\ROVER\rover.h
                                           ;#define	RED_FLAG		L_RED_CTL,6                                                   C:\EMBEDDED\ROVER\rover.h
                                           ;#define	SPEED_R			L_RED_CTL,5                                                   C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;#define	SLOW_ON			b'11000110'		;1xx..=start on, x1x..=on, xx000110=6 beats      C:\EMBEDDED\ROVER\rover.h
                                           ;#define	SLOW_OFF		b'01000110'		;0xx..=start off, x1x..=on, xx000110=6 beats     C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;#define	FAST_ON			b'11000010'                                                   C:\EMBEDDED\ROVER\rover.h
                                           ;#define	FAST_OFF		b'01000010'                                                   C:\EMBEDDED\ROVER\rover.h
                                           ;                                                                                C:\EMBEDDED\ROVER\rover.h
                                           ;#define VERYSLOW		b'11010000'                                                   C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\EMBEDDED\ROVER\rover.h
                                                                                                                            C:\Embedded\Rover\Timeserv.asm
                                           ;Local variables                                                                 C:\Embedded\Rover\Timeserv.asm
                                           	UDATA                                                                           C:\Embedded\Rover\Timeserv.asm
                                           L_Tim1		res		1                                                                   C:\Embedded\Rover\Timeserv.asm
                                           L_Tim2		res		1                                                                   C:\Embedded\Rover\Timeserv.asm
                                           L_Tim3		res		1                                                                   C:\Embedded\Rover\Timeserv.asm
                                                                                                                            C:\Embedded\Rover\Timeserv.asm
                                           	Extern	G_Events	;(see hw_interf.h for flags in G_Events)                        C:\Embedded\Rover\Timeserv.asm
                                                                                                                            C:\Embedded\Rover\Timeserv.asm
                                           		CODE	                                                                          C:\Embedded\Rover\Timeserv.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Timeserv.asm
                                           ;Procedure: 	These are actually 3 procedures that offer a combination of delays  C:\Embedded\Rover\Timeserv.asm
                                           ;Function:	Cause a delay by a specified number of miliseconds,100uS or uS        C:\Embedded\Rover\Timeserv.asm
                                           ;			In these procedures, the flag XMIT_RCVD will be set only by the ISR          C:\Embedded\Rover\Timeserv.asm
                                           ;			if a data is received.  Otherwise, if its used for just delaying,            C:\Embedded\Rover\Timeserv.asm
                                           ;			it is assumed that no delays are expected (corresponding interrupt enables   C:\Embedded\Rover\Timeserv.asm
                                           ;			are reset).                                                                  C:\Embedded\Rover\Timeserv.asm
                                           ;Inputs:	W number of 100 Ms,100Us or uS                                          C:\Embedded\Rover\Timeserv.asm
                                           ;Returns:	Nothing                                                                C:\Embedded\Rover\Timeserv.asm
                                           ;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ C:\Embedded\Rover\Timeserv.asm
                                           DelaymS                                                                          C:\Embedded\Rover\Timeserv.asm
                                           			global DelaymS                                                                C:\Embedded\Rover\Timeserv.asm
000257   00e3     MOVWF     0x63           			MOVWF	L_Tim3		;W has the number of miliseconds                                C:\Embedded\Rover\Timeserv.asm
000258   300a     MOVLW     0xa            _MILISEC	MOVLW	d'10'		;                                                          C:\Embedded\Rover\Timeserv.asm
000259   225d     CALL      0x25d          			CALL	Delay100uS	;                                                             C:\Embedded\Rover\Timeserv.asm
00025a   0be3     DECFSZ    0x63,0x1       			DECFSZ	L_Tim3,F	;                                                             C:\Embedded\Rover\Timeserv.asm
00025b   2a58     GOTO      0x258          			GOTO	_MILISEC	;                                                               C:\Embedded\Rover\Timeserv.asm
00025c   0008     RETURN                   TIMEREXMs	RETURN				;                                                            C:\Embedded\Rover\Timeserv.asm
                                           ;........................................................                        C:\Embedded\Rover\Timeserv.asm
                                           Delay100uS                                                                       C:\Embedded\Rover\Timeserv.asm
                                           			global Delay100uS                                                             C:\Embedded\Rover\Timeserv.asm
00025d   00e2     MOVWF     0x62           			MOVWF	L_Tim2		;W has number of 100uS to wait                                  C:\Embedded\Rover\Timeserv.asm
00025e   3064     MOVLW     0x64           _MIC100S	MOVLW	d'100'		;				                                                     C:\Embedded\Rover\Timeserv.asm
00025f   2263     CALL      0x263          			CALL	DelayuS		;                                                               C:\Embedded\Rover\Timeserv.asm
000260   0be2     DECFSZ    0x62,0x1       			DECFSZ	L_Tim2,F	;                                                             C:\Embedded\Rover\Timeserv.asm
000261   2a5e     GOTO      0x25e          			GOTO	_MIC100S	;                                                               C:\Embedded\Rover\Timeserv.asm
000262   0008     RETURN                   TIMEREX100	RETURN				;                                                           C:\Embedded\Rover\Timeserv.asm
                                           ;........................................................                        C:\Embedded\Rover\Timeserv.asm
                                           DelayuS                                                                          C:\Embedded\Rover\Timeserv.asm
                                           			global DelayuS                                                                C:\Embedded\Rover\Timeserv.asm
000263   110b     BCF       0xb,0x2        			BCF		INTCON,T0IF	;                                                            C:\Embedded\Rover\Timeserv.asm
000264   00e1     MOVWF     0x61           			MOVWF	L_Tim1		;W has the number of uS (1:1 prescaler)                         C:\Embedded\Rover\Timeserv.asm
000265   09e1     COMF      0x61,0x1       			COMF	L_Tim1,F	;TMR0=(256 - number of clocks)                                  C:\Embedded\Rover\Timeserv.asm
000266   0ae1     INCF      0x61,0x1       			INCF	L_Tim1,F	;2 increments for lost instruct clocks                          C:\Embedded\Rover\Timeserv.asm
000267   0a61     INCF      0x61,0x0       			INCF	L_Tim1,W	;		                                                             C:\Embedded\Rover\Timeserv.asm
000268   0081     MOVWF     0x1            			MOVWF	TMR0		;                                                                 C:\Embedded\Rover\Timeserv.asm
000269   1d0b     BTFSS     0xb,0x2        _LOOP_TIM0	BTFSS	INTCON,T0IF	;Timer0 overflow?                                   C:\Embedded\Rover\Timeserv.asm
00026a   2a69     GOTO      0x269          			GOTO	_LOOP_TIM0	;                                                             C:\Embedded\Rover\Timeserv.asm
00026b   0008     RETURN                   TIMERXuS	RETURN				;                                                             C:\Embedded\Rover\Timeserv.asm
                                           ;........................................................                        C:\Embedded\Rover\Timeserv.asm
                                           			END						; end timeserve code                                                 C:\Embedded\Rover\Timeserv.asm
